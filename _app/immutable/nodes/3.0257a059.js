import{S as be,i as ge,s as we,k as m,a as L,q as j,l as y,m as b,h as f,c as B,r as M,J as Ye,n as A,p as W,b as z,G as l,K as Y,H as oe,L as ve,M as Te,N as ee,u as me,O as Kt,e as dt,d as ye,f as Gt,g as _e,o as Xt,P as Yt,v as Qt,y as Ne,z as ke,A as Pe,B as De}from"../chunks/index.394dbf96.js";const Zt=!0,Kr=Object.freeze(Object.defineProperty({__proto__:null,prerender:Zt},Symbol.toStringTag,{value:"Module"}));function $t(t){let e,n,r,s,o,i,a,h,c,u,d,_,w,E,g,T,S,v,R,O,N,C,U,x,k,P,H,Z,Q,X,I,q,K;return{c(){e=m("div"),n=m("iframe"),s=L(),o=m("p"),i=j(`Peace Messenger serves as your guiding light, assisting
    you with AI in expressing your heartfelt emotions and
    needs to those who are dear to you. 
    `),a=m("br"),h=L(),c=m("center"),u=m("img"),_=L(),w=m("br"),E=j(`    

    This `),g=m("a"),T=j("Open Source "),S=j("project is an attempt to see if AI can make conversations better and help people understand and respect each other more."),v=L(),R=m("br"),O=L(),N=m("div"),C=m("button"),U=m("span"),x=j("Create Room"),k=L(),P=m("button"),H=j("Join Room"),Z=L(),Q=m("div"),X=m("small"),I=j(`Though messages are transmitted with WebRTC peer-to-peer communication, it's also processed with OpenAI. Hence,
        it's not recommended to share any sensitive information.`),this.h()},l(G){e=y(G,"DIV",{});var D=b(e);n=y(D,"IFRAME",{src:!0,frameborder:!0,scrolling:!0,width:!0,height:!0,title:!0}),b(n).forEach(f),s=B(D),o=y(D,"P",{style:!0});var F=b(o);i=M(F,`Peace Messenger serves as your guiding light, assisting
    you with AI in expressing your heartfelt emotions and
    needs to those who are dear to you. 
    `),a=y(F,"BR",{}),h=B(F),c=y(F,"CENTER",{});var J=b(c);u=y(J,"IMG",{src:!0,style:!0}),J.forEach(f),_=B(F),w=y(F,"BR",{}),E=M(F,`    

    This `),g=y(F,"A",{href:!0});var te=b(g);T=M(te,"Open Source "),te.forEach(f),S=M(F,"project is an attempt to see if AI can make conversations better and help people understand and respect each other more."),F.forEach(f),v=B(D),R=y(D,"BR",{}),O=B(D),N=y(D,"DIV",{class:!0});var se=b(N);C=y(se,"BUTTON",{class:!0});var ne=b(C);U=y(ne,"SPAN",{});var fe=b(U);x=M(fe,"Create Room"),fe.forEach(f),ne.forEach(f),k=B(se),P=y(se,"BUTTON",{class:!0});var de=b(P);H=M(de,"Join Room"),de.forEach(f),se.forEach(f),Z=B(D),Q=y(D,"DIV",{class:!0,style:!0});var ie=b(Q);X=y(ie,"SMALL",{});var he=b(X);I=M(he,`Though messages are transmitted with WebRTC peer-to-peer communication, it's also processed with OpenAI. Hence,
        it's not recommended to share any sensitive information.`),he.forEach(f),ie.forEach(f),D.forEach(f),this.h()},h(){Ye(n.src,r="https://ghbtns.com/github-btn.html?user=jamesfebin&repo=PeaceMessenger&type=star&count=false&size=large")||A(n,"src",r),A(n,"frameborder","0"),A(n,"scrolling","0"),A(n,"width","170"),A(n,"height","30"),A(n,"title","GitHub"),Ye(u.src,d="/peace_messenger/hero.png")||A(u,"src",d),W(u,"height","250px",1),A(g,"href","https://github.com/jamesfebin/PeaceMessenger"),W(o,"text-align","justify",1),W(o,"margin-top","4%"),A(C,"class","button is-info"),A(P,"class","button is-primary"),A(N,"class","buttons"),A(Q,"class","notification is-info is-light"),W(Q,"text-align","justify",1)},m(G,D){z(G,e,D),l(e,n),l(e,s),l(e,o),l(o,i),l(o,a),l(o,h),l(o,c),l(c,u),l(o,_),l(o,w),l(o,E),l(o,g),l(g,T),l(o,S),l(e,v),l(e,R),l(e,O),l(e,N),l(N,C),l(C,U),l(U,x),l(N,k),l(N,P),l(P,H),l(e,Z),l(e,Q),l(Q,X),l(X,I),q||(K=[Y(C,"click",t[1]),Y(P,"click",t[2])],q=!0)},p:oe,i:oe,o:oe,d(G){G&&f(e),q=!1,ve(K)}}}function en(t){const e=Te();return[e,()=>e("message",{type:"navigate",page:"createroom"}),()=>e("message",{type:"navigate",page:"joinroom"})]}class tn extends be{constructor(e){super(),ge(this,e,en,$t,we,{})}}function ht(t){let e,n;return{c(){e=m("div"),n=j(t[2]),this.h()},l(r){e=y(r,"DIV",{class:!0});var s=b(e);n=M(s,t[2]),s.forEach(f),this.h()},h(){A(e,"class","notification is-danger is-light")},m(r,s){z(r,e,s),l(e,n)},p(r,s){s&4&&me(n,r[2])},d(r){r&&f(e)}}}function nn(t){let e,n,r,s,o,i,a,h,c,u,d,_,w,E,g,T,S,v,R,O,N,C,U,x,k,P,H,Z,Q,X,I=t[2]&&ht(t);return{c(){e=m("div"),n=m("center"),r=m("span"),s=j("Create Room"),o=L(),i=m("form"),a=m("div"),h=m("label"),c=j("First Name"),u=L(),d=m("div"),_=m("input"),w=L(),E=m("div"),g=m("label"),T=j("OpenAI Key"),S=L(),v=m("div"),R=m("input"),O=L(),N=m("p"),C=j("This app doesn't save your key. However, it trasmits to the your friend's system, so that messages are processed using AI. Here's a link on how to generate the OpenAI key."),U=L(),I&&I.c(),x=L(),k=m("div"),P=m("div"),H=m("button"),Z=j("Create Room"),this.h()},l(q){e=y(q,"DIV",{class:!0});var K=b(e);n=y(K,"CENTER",{});var G=b(n);r=y(G,"SPAN",{class:!0,style:!0});var D=b(r);s=M(D,"Create Room"),D.forEach(f),G.forEach(f),o=B(K),i=y(K,"FORM",{});var F=b(i);a=y(F,"DIV",{class:!0});var J=b(a);h=y(J,"LABEL",{class:!0});var te=b(h);c=M(te,"First Name"),te.forEach(f),u=B(J),d=y(J,"DIV",{class:!0});var se=b(d);_=y(se,"INPUT",{class:!0,type:!0,placeholder:!0}),se.forEach(f),J.forEach(f),w=B(F),E=y(F,"DIV",{class:!0});var ne=b(E);g=y(ne,"LABEL",{class:!0});var fe=b(g);T=M(fe,"OpenAI Key"),fe.forEach(f),S=B(ne),v=y(ne,"DIV",{class:!0});var de=b(v);R=y(de,"INPUT",{class:!0,type:!0,placeholder:!0}),de.forEach(f),O=B(ne),N=y(ne,"P",{class:!0});var ie=b(N);C=M(ie,"This app doesn't save your key. However, it trasmits to the your friend's system, so that messages are processed using AI. Here's a link on how to generate the OpenAI key."),ie.forEach(f),ne.forEach(f),U=B(F),I&&I.l(F),x=B(F),k=y(F,"DIV",{class:!0});var he=b(k);P=y(he,"DIV",{class:!0});var Se=b(P);H=y(Se,"BUTTON",{class:!0});var ce=b(H);Z=M(ce,"Create Room"),ce.forEach(f),Se.forEach(f),he.forEach(f),F.forEach(f),K.forEach(f),this.h()},h(){A(r,"class","is-size-4"),W(r,"margin-top","5%"),A(h,"class","label"),A(_,"class","input"),A(_,"type","text"),A(_,"placeholder","John"),A(d,"class","control"),A(a,"class","field"),A(g,"class","label"),A(R,"class","input"),A(R,"type","password"),A(R,"placeholder","Enter your OpenAI key"),A(v,"class","control"),A(N,"class","help"),A(E,"class","field"),A(H,"class","button is-info"),A(P,"class","control"),A(k,"class","field"),A(e,"class","is-pulled-left")},m(q,K){z(q,e,K),l(e,n),l(n,r),l(r,s),l(e,o),l(e,i),l(i,a),l(a,h),l(h,c),l(a,u),l(a,d),l(d,_),ee(_,t[0]),l(i,w),l(i,E),l(E,g),l(g,T),l(E,S),l(E,v),l(v,R),ee(R,t[1]),l(E,O),l(E,N),l(N,C),l(i,U),I&&I.m(i,null),l(i,x),l(i,k),l(k,P),l(P,H),l(H,Z),Q||(X=[Y(_,"input",t[4]),Y(R,"input",t[5]),Y(H,"click",t[6])],Q=!0)},p(q,[K]){K&1&&_.value!==q[0]&&ee(_,q[0]),K&2&&R.value!==q[1]&&ee(R,q[1]),q[2]?I?I.p(q,K):(I=ht(q),I.c(),I.m(i,x)):I&&(I.d(1),I=null)},i:oe,o:oe,d(q){q&&f(e),I&&I.d(),Q=!1,ve(X)}}}function rn(t,e,n){const r=Te();let s,o,i;function a(){if(!s||!o||s.length==0||o.length==0){n(2,i="Please enter your First Name and OpenAI Key");return}r("message",{type:"createroom",name:s,openai_key:o})}function h(){s=this.value,n(0,s)}function c(){o=this.value,n(1,o)}return[s,o,i,a,h,c,()=>a()]}class sn extends be{constructor(e){super(),ge(this,e,rn,nn,we,{})}}function on(t){let e,n,r,s,o,i,a,h,c,u,d,_,w,E,g,T,S,v,R,O,N,C,U,x,k;return{c(){e=m("form"),n=m("div"),r=m("div"),s=m("small"),o=j(`Please forward the below code to your friend, inviting them to
                enter the room.`),i=L(),a=m("div"),h=m("textarea"),c=L(),u=m("br"),d=L(),_=m("div"),w=m("label"),E=m("small"),g=j(`After your friend enters your code, another is produced for
                them. You need to input that here to connect with them.`),T=L(),S=m("div"),v=m("textarea"),R=L(),O=m("div"),N=m("div"),C=m("button"),U=j("Start Chatting"),this.h()},l(P){e=y(P,"FORM",{style:!0});var H=b(e);n=y(H,"DIV",{class:!0});var Z=b(n);r=y(Z,"DIV",{class:!0,style:!0});var Q=b(r);s=y(Q,"SMALL",{style:!0});var X=b(s);o=M(X,`Please forward the below code to your friend, inviting them to
                enter the room.`),X.forEach(f),Q.forEach(f),i=B(Z),a=y(Z,"DIV",{class:!0});var I=b(a);h=y(I,"TEXTAREA",{class:!0}),b(h).forEach(f),I.forEach(f),Z.forEach(f),c=B(H),u=y(H,"BR",{}),d=B(H),_=y(H,"DIV",{class:!0});var q=b(_);w=y(q,"LABEL",{class:!0,style:!0});var K=b(w);E=y(K,"SMALL",{});var G=b(E);g=M(G,`After your friend enters your code, another is produced for
                them. You need to input that here to connect with them.`),G.forEach(f),K.forEach(f),T=B(q),S=y(q,"DIV",{class:!0});var D=b(S);v=y(D,"TEXTAREA",{class:!0,placeholder:!0}),b(v).forEach(f),D.forEach(f),q.forEach(f),R=B(H),O=y(H,"DIV",{class:!0});var F=b(O);N=y(F,"DIV",{class:!0});var J=b(N);C=y(J,"BUTTON",{class:!0});var te=b(C);U=M(te,"Start Chatting"),te.forEach(f),J.forEach(f),F.forEach(f),H.forEach(f),this.h()},h(){W(s,"font-weight","500",1),A(r,"class","notification is-info is-light"),W(r,"font-weight","500",1),W(r,"margin-bottom","2%"),A(h,"class","textarea"),h.readOnly=!0,A(a,"class","control"),A(n,"class","field"),A(w,"class","label"),W(w,"font-weight","500",1),A(v,"class","textarea"),A(v,"placeholder","Enter your friend's code here"),A(S,"class","control"),A(_,"class","field"),A(C,"class","button is-info"),A(N,"class","control"),A(O,"class","field"),W(e,"margin-top","4%")},m(P,H){z(P,e,H),l(e,n),l(n,r),l(r,s),l(s,o),l(n,i),l(n,a),l(a,h),ee(h,t[0]),l(e,c),l(e,u),l(e,d),l(e,_),l(_,w),l(w,E),l(E,g),l(_,T),l(_,S),l(S,v),ee(v,t[1]),l(e,R),l(e,O),l(O,N),l(N,C),l(C,U),x||(k=[Y(h,"click",an),Y(h,"input",t[3]),Y(v,"input",t[4]),Y(C,"click",t[5])],x=!0)},p(P,[H]){H&1&&ee(h,P[0]),H&2&&ee(v,P[1])},i:oe,o:oe,d(P){P&&f(e),x=!1,ve(k)}}}function an(t){t.target.select()}function ln(t,e,n){const r=Te();let{offer:s}=e,{recievedOffer:o}=e;function i(){s=this.value,n(0,s)}function a(){o=this.value,n(1,o)}const h=()=>r("message",{type:"join",remoteDescription:o});return t.$$set=c=>{"offer"in c&&n(0,s=c.offer),"recievedOffer"in c&&n(1,o=c.recievedOffer)},[s,o,r,i,a,h]}class cn extends be{constructor(e){super(),ge(this,e,ln,on,we,{offer:0,recievedOffer:1})}}function un(t){let e,n,r,s,o,i,a,h,c,u,d,_,w,E,g,T,S,v,R,O,N,C,U,x=t[1]&&pt(t);return{c(){e=m("div"),n=m("label"),r=m("small"),s=j(`Please paste the code shared by your friend who created the
                    room.`),o=L(),i=m("div"),a=m("textarea"),h=L(),x&&x.c(),c=L(),u=m("div"),d=m("label"),_=m("small"),w=j("Name"),E=L(),g=m("div"),T=m("textarea"),S=L(),v=m("div"),R=m("div"),O=m("button"),N=j("Join Room"),this.h()},l(k){e=y(k,"DIV",{class:!0});var P=b(e);n=y(P,"LABEL",{class:!0,style:!0});var H=b(n);r=y(H,"SMALL",{});var Z=b(r);s=M(Z,`Please paste the code shared by your friend who created the
                    room.`),Z.forEach(f),H.forEach(f),o=B(P),i=y(P,"DIV",{class:!0});var Q=b(i);a=y(Q,"TEXTAREA",{class:!0}),b(a).forEach(f),Q.forEach(f),P.forEach(f),h=B(k),x&&x.l(k),c=B(k),u=y(k,"DIV",{class:!0});var X=b(u);d=y(X,"LABEL",{class:!0,style:!0});var I=b(d);_=y(I,"SMALL",{});var q=b(_);w=M(q,"Name"),q.forEach(f),I.forEach(f),E=B(X),g=y(X,"DIV",{class:!0});var K=b(g);T=y(K,"TEXTAREA",{class:!0,placeholder:!0}),b(T).forEach(f),K.forEach(f),X.forEach(f),S=B(k),v=y(k,"DIV",{class:!0});var G=b(v);R=y(G,"DIV",{class:!0});var D=b(R);O=y(D,"BUTTON",{class:!0});var F=b(O);N=M(F,"Join Room"),F.forEach(f),D.forEach(f),G.forEach(f),this.h()},h(){A(n,"class","label"),W(n,"font-weight","500",1),A(a,"class","textarea"),A(i,"class","control"),A(e,"class","field"),A(d,"class","label"),W(d,"font-weight","500",1),A(T,"class","input"),A(T,"placeholder","John"),A(g,"class","control"),A(u,"class","field"),A(O,"class","button is-info"),A(R,"class","control"),A(v,"class","field")},m(k,P){z(k,e,P),l(e,n),l(n,r),l(r,s),l(e,o),l(e,i),l(i,a),ee(a,t[3]),z(k,h,P),x&&x.m(k,P),z(k,c,P),z(k,u,P),l(u,d),l(d,_),l(_,w),l(u,E),l(u,g),l(g,T),ee(T,t[2]),z(k,S,P),z(k,v,P),l(v,R),l(R,O),l(O,N),C||(U=[Y(a,"click",Tt),Y(a,"input",t[6]),Y(T,"input",t[7]),Y(O,"click",t[8])],C=!0)},p(k,P){P&8&&ee(a,k[3]),k[1]?x?x.p(k,P):(x=pt(k),x.c(),x.m(c.parentNode,c)):x&&(x.d(1),x=null),P&4&&ee(T,k[2])},d(k){k&&f(e),k&&f(h),x&&x.d(k),k&&f(c),k&&f(u),k&&f(S),k&&f(v),C=!1,ve(U)}}}function fn(t){let e,n,r,s,o,i,a,h,c,u,d,_,w,E;return{c(){e=m("div"),n=m("div"),r=m("small"),s=j(`Please forward the below code to your friend, once they
                    enter this, you will be automatically connected.`),o=L(),i=m("div"),a=m("textarea"),h=L(),c=m("button"),u=m("span"),d=m("i"),_=j(" Waiting"),this.h()},l(g){e=y(g,"DIV",{class:!0});var T=b(e);n=y(T,"DIV",{class:!0,style:!0});var S=b(n);r=y(S,"SMALL",{style:!0});var v=b(r);s=M(v,`Please forward the below code to your friend, once they
                    enter this, you will be automatically connected.`),v.forEach(f),S.forEach(f),o=B(T),i=y(T,"DIV",{class:!0});var R=b(i);a=y(R,"TEXTAREA",{class:!0}),b(a).forEach(f),R.forEach(f),T.forEach(f),h=B(g),c=y(g,"BUTTON",{class:!0});var O=b(c);u=y(O,"SPAN",{});var N=b(u);d=y(N,"I",{class:!0}),b(d).forEach(f),_=M(N," Waiting"),N.forEach(f),O.forEach(f),this.h()},h(){W(r,"font-weight","550",1),A(n,"class","notification is-info is-light"),W(n,"font-weight","550",1),W(n,"margin-bottom","2%"),A(a,"class","textarea"),a.readOnly=!0,A(i,"class","control"),A(e,"class","field"),A(d,"class","fas fa-spinner fa-spin"),A(c,"class","button is-info")},m(g,T){z(g,e,T),l(e,n),l(n,r),l(r,s),l(e,o),l(e,i),l(i,a),ee(a,t[0]),z(g,h,T),z(g,c,T),l(c,u),l(u,d),l(u,_),w||(E=[Y(a,"click",Tt),Y(a,"input",t[5])],w=!0)},p(g,T){T&1&&ee(a,g[0])},d(g){g&&f(e),g&&f(h),g&&f(c),w=!1,ve(E)}}}function pt(t){let e,n,r;return{c(){e=m("div"),n=m("small"),r=j(t[1]),this.h()},l(s){e=y(s,"DIV",{class:!0});var o=b(e);n=y(o,"SMALL",{});var i=b(n);r=M(i,t[1]),i.forEach(f),o.forEach(f),this.h()},h(){A(e,"class","notification is-danger is-light")},m(s,o){z(s,e,o),l(e,n),l(n,r)},p(s,o){o&2&&me(r,s[1])},d(s){s&&f(e)}}}function dn(t){let e,n,r,s,o,i;function a(u,d){return u[0]?fn:un}let h=a(t),c=h(t);return{c(){e=m("div"),n=m("center"),r=m("span"),s=j("Join Room"),o=L(),i=m("form"),c.c(),this.h()},l(u){e=y(u,"DIV",{});var d=b(e);n=y(d,"CENTER",{});var _=b(n);r=y(_,"SPAN",{class:!0,style:!0});var w=b(r);s=M(w,"Join Room"),w.forEach(f),_.forEach(f),o=B(d),i=y(d,"FORM",{style:!0});var E=b(i);c.l(E),E.forEach(f),d.forEach(f),this.h()},h(){A(r,"class","is-size-4"),W(r,"margin-top","5%"),W(i,"margin-top","4%")},m(u,d){z(u,e,d),l(e,n),l(n,r),l(r,s),l(e,o),l(e,i),c.m(i,null)},p(u,[d]){h===(h=a(u))&&c?c.p(u,d):(c.d(1),c=h(u),c&&(c.c(),c.m(i,null)))},i:oe,o:oe,d(u){u&&f(e),c.d()}}}function Tt(t){t.target.select()}function hn(t,e,n){const r=Te();let{offer:s}=e,{exchangeError:o}=e,i,a;function h(){s=this.value,n(0,s)}function c(){a=this.value,n(3,a)}function u(){i=this.value,n(2,i)}const d=()=>r("message",{type:"join",remoteDescription:a,name:i});return t.$$set=_=>{"offer"in _&&n(0,s=_.offer),"exchangeError"in _&&n(1,o=_.exchangeError)},[s,o,i,a,r,h,c,u,d]}class pn extends be{constructor(e){super(),ge(this,e,hn,dn,we,{offer:0,exchangeError:1})}}function Nt(t,e){return function(){return t.apply(e,arguments)}}const{toString:mn}=Object.prototype,{getPrototypeOf:tt}=Object,je=(t=>e=>{const n=mn.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),le=t=>(t=t.toLowerCase(),e=>je(e)===t),Me=t=>e=>typeof e===t,{isArray:Ae}=Array,Oe=Me("undefined");function yn(t){return t!==null&&!Oe(t)&&t.constructor!==null&&!Oe(t.constructor)&&re(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const kt=le("ArrayBuffer");function _n(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&kt(t.buffer),e}const En=Me("string"),re=Me("function"),Pt=Me("number"),Ve=t=>t!==null&&typeof t=="object",bn=t=>t===!0||t===!1,Le=t=>{if(je(t)!=="object")return!1;const e=tt(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},gn=le("Date"),wn=le("File"),vn=le("Blob"),An=le("FileList"),Sn=t=>Ve(t)&&re(t.pipe),Rn=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||re(t.append)&&((e=je(t))==="formdata"||e==="object"&&re(t.toString)&&t.toString()==="[object FormData]"))},On=le("URLSearchParams"),Tn=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ce(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),Ae(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{const o=n?Object.getOwnPropertyNames(t):Object.keys(t),i=o.length;let a;for(r=0;r<i;r++)a=o[r],e.call(null,t[a],a,t)}}function Dt(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const Ct=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),It=t=>!Oe(t)&&t!==Ct;function Qe(){const{caseless:t}=It(this)&&this||{},e={},n=(r,s)=>{const o=t&&Dt(e,s)||s;Le(e[o])&&Le(r)?e[o]=Qe(e[o],r):Le(r)?e[o]=Qe({},r):Ae(r)?e[o]=r.slice():e[o]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&Ce(arguments[r],n);return e}const Nn=(t,e,n,{allOwnKeys:r}={})=>(Ce(e,(s,o)=>{n&&re(s)?t[o]=Nt(s,n):t[o]=s},{allOwnKeys:r}),t),kn=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Pn=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},Dn=(t,e,n,r)=>{let s,o,i;const a={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),o=s.length;o-- >0;)i=s[o],(!r||r(i,t,e))&&!a[i]&&(e[i]=t[i],a[i]=!0);t=n!==!1&&tt(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},Cn=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},In=t=>{if(!t)return null;if(Ae(t))return t;let e=t.length;if(!Pt(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},Ln=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&tt(Uint8Array)),Bn=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=r.next())&&!s.done;){const o=s.value;e.call(t,o[0],o[1])}},Fn=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},xn=le("HTMLFormElement"),Un=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),mt=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),jn=le("RegExp"),Lt=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Ce(n,(s,o)=>{e(s,o,t)!==!1&&(r[o]=s)}),Object.defineProperties(t,r)},Mn=t=>{Lt(t,(e,n)=>{if(re(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(re(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Vn=(t,e)=>{const n={},r=s=>{s.forEach(o=>{n[o]=!0})};return Ae(t)?r(t):r(String(t).split(e)),n},Hn=()=>{},Jn=(t,e)=>(t=+t,Number.isFinite(t)?t:e),We="abcdefghijklmnopqrstuvwxyz",yt="0123456789",Bt={DIGIT:yt,ALPHA:We,ALPHA_DIGIT:We+We.toUpperCase()+yt},qn=(t=16,e=Bt.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function zn(t){return!!(t&&re(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const Wn=t=>{const e=new Array(10),n=(r,s)=>{if(Ve(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[s]=r;const o=Ae(r)?[]:{};return Ce(r,(i,a)=>{const h=n(i,s+1);!Oe(h)&&(o[a]=h)}),e[s]=void 0,o}}return r};return n(t,0)},Kn=le("AsyncFunction"),Gn=t=>t&&(Ve(t)||re(t))&&re(t.then)&&re(t.catch),p={isArray:Ae,isArrayBuffer:kt,isBuffer:yn,isFormData:Rn,isArrayBufferView:_n,isString:En,isNumber:Pt,isBoolean:bn,isObject:Ve,isPlainObject:Le,isUndefined:Oe,isDate:gn,isFile:wn,isBlob:vn,isRegExp:jn,isFunction:re,isStream:Sn,isURLSearchParams:On,isTypedArray:Ln,isFileList:An,forEach:Ce,merge:Qe,extend:Nn,trim:Tn,stripBOM:kn,inherits:Pn,toFlatObject:Dn,kindOf:je,kindOfTest:le,endsWith:Cn,toArray:In,forEachEntry:Bn,matchAll:Fn,isHTMLForm:xn,hasOwnProperty:mt,hasOwnProp:mt,reduceDescriptors:Lt,freezeMethods:Mn,toObjectSet:Vn,toCamelCase:Un,noop:Hn,toFiniteNumber:Jn,findKey:Dt,global:Ct,isContextDefined:It,ALPHABET:Bt,generateString:qn,isSpecCompliantForm:zn,toJSONObject:Wn,isAsyncFn:Kn,isThenable:Gn};function V(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s)}p.inherits(V,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:p.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Ft=V.prototype,xt={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{xt[t]={value:t}});Object.defineProperties(V,xt);Object.defineProperty(Ft,"isAxiosError",{value:!0});V.from=(t,e,n,r,s,o)=>{const i=Object.create(Ft);return p.toFlatObject(t,i,function(h){return h!==Error.prototype},a=>a!=="isAxiosError"),V.call(i,t.message,e,n,r,s),i.cause=t,i.name=t.name,o&&Object.assign(i,o),i};const Xn=null;function Ze(t){return p.isPlainObject(t)||p.isArray(t)}function Ut(t){return p.endsWith(t,"[]")?t.slice(0,-2):t}function _t(t,e,n){return t?t.concat(e).map(function(s,o){return s=Ut(s),!n&&o?"["+s+"]":s}).join(n?".":""):e}function Yn(t){return p.isArray(t)&&!t.some(Ze)}const Qn=p.toFlatObject(p,{},null,function(e){return/^is[A-Z]/.test(e)});function He(t,e,n){if(!p.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=p.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,T){return!p.isUndefined(T[g])});const r=n.metaTokens,s=n.visitor||u,o=n.dots,i=n.indexes,h=(n.Blob||typeof Blob<"u"&&Blob)&&p.isSpecCompliantForm(e);if(!p.isFunction(s))throw new TypeError("visitor must be a function");function c(E){if(E===null)return"";if(p.isDate(E))return E.toISOString();if(!h&&p.isBlob(E))throw new V("Blob is not supported. Use a Buffer instead.");return p.isArrayBuffer(E)||p.isTypedArray(E)?h&&typeof Blob=="function"?new Blob([E]):Buffer.from(E):E}function u(E,g,T){let S=E;if(E&&!T&&typeof E=="object"){if(p.endsWith(g,"{}"))g=r?g:g.slice(0,-2),E=JSON.stringify(E);else if(p.isArray(E)&&Yn(E)||(p.isFileList(E)||p.endsWith(g,"[]"))&&(S=p.toArray(E)))return g=Ut(g),S.forEach(function(R,O){!(p.isUndefined(R)||R===null)&&e.append(i===!0?_t([g],O,o):i===null?g:g+"[]",c(R))}),!1}return Ze(E)?!0:(e.append(_t(T,g,o),c(E)),!1)}const d=[],_=Object.assign(Qn,{defaultVisitor:u,convertValue:c,isVisitable:Ze});function w(E,g){if(!p.isUndefined(E)){if(d.indexOf(E)!==-1)throw Error("Circular reference detected in "+g.join("."));d.push(E),p.forEach(E,function(S,v){(!(p.isUndefined(S)||S===null)&&s.call(e,S,p.isString(v)?v.trim():v,g,_))===!0&&w(S,g?g.concat(v):[v])}),d.pop()}}if(!p.isObject(t))throw new TypeError("data must be an object");return w(t),e}function Et(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function nt(t,e){this._pairs=[],t&&He(t,this,e)}const jt=nt.prototype;jt.append=function(e,n){this._pairs.push([e,n])};jt.toString=function(e){const n=e?function(r){return e.call(this,r,Et)}:Et;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function Zn(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Mt(t,e,n){if(!e)return t;const r=n&&n.encode||Zn,s=n&&n.serialize;let o;if(s?o=s(e,n):o=p.isURLSearchParams(e)?e.toString():new nt(e,n).toString(r),o){const i=t.indexOf("#");i!==-1&&(t=t.slice(0,i)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}class $n{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){p.forEach(this.handlers,function(r){r!==null&&e(r)})}}const bt=$n,Vt={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},er=typeof URLSearchParams<"u"?URLSearchParams:nt,tr=typeof FormData<"u"?FormData:null,nr=typeof Blob<"u"?Blob:null,rr=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),sr=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),ae={isBrowser:!0,classes:{URLSearchParams:er,FormData:tr,Blob:nr},isStandardBrowserEnv:rr,isStandardBrowserWebWorkerEnv:sr,protocols:["http","https","file","blob","url","data"]};function or(t,e){return He(t,new ae.classes.URLSearchParams,Object.assign({visitor:function(n,r,s,o){return ae.isNode&&p.isBuffer(n)?(this.append(r,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},e))}function ir(t){return p.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function ar(t){const e={},n=Object.keys(t);let r;const s=n.length;let o;for(r=0;r<s;r++)o=n[r],e[o]=t[o];return e}function Ht(t){function e(n,r,s,o){let i=n[o++];const a=Number.isFinite(+i),h=o>=n.length;return i=!i&&p.isArray(s)?s.length:i,h?(p.hasOwnProp(s,i)?s[i]=[s[i],r]:s[i]=r,!a):((!s[i]||!p.isObject(s[i]))&&(s[i]=[]),e(n,r,s[i],o)&&p.isArray(s[i])&&(s[i]=ar(s[i])),!a)}if(p.isFormData(t)&&p.isFunction(t.entries)){const n={};return p.forEachEntry(t,(r,s)=>{e(ir(r),s,n,0)}),n}return null}const lr={"Content-Type":void 0};function cr(t,e,n){if(p.isString(t))try{return(e||JSON.parse)(t),p.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Je={transitional:Vt,adapter:["xhr","http"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,o=p.isObject(e);if(o&&p.isHTMLForm(e)&&(e=new FormData(e)),p.isFormData(e))return s&&s?JSON.stringify(Ht(e)):e;if(p.isArrayBuffer(e)||p.isBuffer(e)||p.isStream(e)||p.isFile(e)||p.isBlob(e))return e;if(p.isArrayBufferView(e))return e.buffer;if(p.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return or(e,this.formSerializer).toString();if((a=p.isFileList(e))||r.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return He(a?{"files[]":e}:e,h&&new h,this.formSerializer)}}return o||s?(n.setContentType("application/json",!1),cr(e)):e}],transformResponse:[function(e){const n=this.transitional||Je.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(e&&p.isString(e)&&(r&&!this.responseType||s)){const i=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(a){if(i)throw a.name==="SyntaxError"?V.from(a,V.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ae.classes.FormData,Blob:ae.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};p.forEach(["delete","get","head"],function(e){Je.headers[e]={}});p.forEach(["post","put","patch"],function(e){Je.headers[e]=p.merge(lr)});const rt=Je,ur=p.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),fr=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(i){s=i.indexOf(":"),n=i.substring(0,s).trim().toLowerCase(),r=i.substring(s+1).trim(),!(!n||e[n]&&ur[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},gt=Symbol("internals");function Re(t){return t&&String(t).trim().toLowerCase()}function Be(t){return t===!1||t==null?t:p.isArray(t)?t.map(Be):String(t)}function dr(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const hr=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Ke(t,e,n,r,s){if(p.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!p.isString(e)){if(p.isString(r))return e.indexOf(r)!==-1;if(p.isRegExp(r))return r.test(e)}}function pr(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function mr(t,e){const n=p.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,o,i){return this[r].call(this,e,s,o,i)},configurable:!0})})}class qe{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function o(a,h,c){const u=Re(h);if(!u)throw new Error("header name must be a non-empty string");const d=p.findKey(s,u);(!d||s[d]===void 0||c===!0||c===void 0&&s[d]!==!1)&&(s[d||h]=Be(a))}const i=(a,h)=>p.forEach(a,(c,u)=>o(c,u,h));return p.isPlainObject(e)||e instanceof this.constructor?i(e,n):p.isString(e)&&(e=e.trim())&&!hr(e)?i(fr(e),n):e!=null&&o(n,e,r),this}get(e,n){if(e=Re(e),e){const r=p.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return dr(s);if(p.isFunction(n))return n.call(this,s,r);if(p.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Re(e),e){const r=p.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||Ke(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function o(i){if(i=Re(i),i){const a=p.findKey(r,i);a&&(!n||Ke(r,r[a],a,n))&&(delete r[a],s=!0)}}return p.isArray(e)?e.forEach(o):o(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const o=n[r];(!e||Ke(this,this[o],o,e,!0))&&(delete this[o],s=!0)}return s}normalize(e){const n=this,r={};return p.forEach(this,(s,o)=>{const i=p.findKey(r,o);if(i){n[i]=Be(s),delete n[o];return}const a=e?pr(o):String(o).trim();a!==o&&delete n[o],n[a]=Be(s),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return p.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&p.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[gt]=this[gt]={accessors:{}}).accessors,s=this.prototype;function o(i){const a=Re(i);r[a]||(mr(s,i),r[a]=!0)}return p.isArray(e)?e.forEach(o):o(e),this}}qe.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);p.freezeMethods(qe.prototype);p.freezeMethods(qe);const ue=qe;function Ge(t,e){const n=this||rt,r=e||n,s=ue.from(r.headers);let o=r.data;return p.forEach(t,function(a){o=a.call(n,o,s.normalize(),e?e.status:void 0)}),s.normalize(),o}function Jt(t){return!!(t&&t.__CANCEL__)}function Ie(t,e,n){V.call(this,t??"canceled",V.ERR_CANCELED,e,n),this.name="CanceledError"}p.inherits(Ie,V,{__CANCEL__:!0});function yr(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new V("Request failed with status code "+n.status,[V.ERR_BAD_REQUEST,V.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const _r=ae.isStandardBrowserEnv?function(){return{write:function(n,r,s,o,i,a){const h=[];h.push(n+"="+encodeURIComponent(r)),p.isNumber(s)&&h.push("expires="+new Date(s).toGMTString()),p.isString(o)&&h.push("path="+o),p.isString(i)&&h.push("domain="+i),a===!0&&h.push("secure"),document.cookie=h.join("; ")},read:function(n){const r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function Er(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function br(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function qt(t,e){return t&&!Er(e)?br(t,e):e}const gr=ae.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function s(o){let i=o;return e&&(n.setAttribute("href",i),i=n.href),n.setAttribute("href",i),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=s(window.location.href),function(i){const a=p.isString(i)?s(i):i;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}();function wr(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function vr(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,o=0,i;return e=e!==void 0?e:1e3,function(h){const c=Date.now(),u=r[o];i||(i=c),n[s]=h,r[s]=c;let d=o,_=0;for(;d!==s;)_+=n[d++],d=d%t;if(s=(s+1)%t,s===o&&(o=(o+1)%t),c-i<e)return;const w=u&&c-u;return w?Math.round(_*1e3/w):void 0}}function wt(t,e){let n=0;const r=vr(50,250);return s=>{const o=s.loaded,i=s.lengthComputable?s.total:void 0,a=o-n,h=r(a),c=o<=i;n=o;const u={loaded:o,total:i,progress:i?o/i:void 0,bytes:a,rate:h||void 0,estimated:h&&i&&c?(i-o)/h:void 0,event:s};u[e?"download":"upload"]=!0,t(u)}}const Ar=typeof XMLHttpRequest<"u",Sr=Ar&&function(t){return new Promise(function(n,r){let s=t.data;const o=ue.from(t.headers).normalize(),i=t.responseType;let a;function h(){t.cancelToken&&t.cancelToken.unsubscribe(a),t.signal&&t.signal.removeEventListener("abort",a)}p.isFormData(s)&&(ae.isStandardBrowserEnv||ae.isStandardBrowserWebWorkerEnv?o.setContentType(!1):o.setContentType("multipart/form-data;",!1));let c=new XMLHttpRequest;if(t.auth){const w=t.auth.username||"",E=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";o.set("Authorization","Basic "+btoa(w+":"+E))}const u=qt(t.baseURL,t.url);c.open(t.method.toUpperCase(),Mt(u,t.params,t.paramsSerializer),!0),c.timeout=t.timeout;function d(){if(!c)return;const w=ue.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders()),g={data:!i||i==="text"||i==="json"?c.responseText:c.response,status:c.status,statusText:c.statusText,headers:w,config:t,request:c};yr(function(S){n(S),h()},function(S){r(S),h()},g),c=null}if("onloadend"in c?c.onloadend=d:c.onreadystatechange=function(){!c||c.readyState!==4||c.status===0&&!(c.responseURL&&c.responseURL.indexOf("file:")===0)||setTimeout(d)},c.onabort=function(){c&&(r(new V("Request aborted",V.ECONNABORTED,t,c)),c=null)},c.onerror=function(){r(new V("Network Error",V.ERR_NETWORK,t,c)),c=null},c.ontimeout=function(){let E=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const g=t.transitional||Vt;t.timeoutErrorMessage&&(E=t.timeoutErrorMessage),r(new V(E,g.clarifyTimeoutError?V.ETIMEDOUT:V.ECONNABORTED,t,c)),c=null},ae.isStandardBrowserEnv){const w=(t.withCredentials||gr(u))&&t.xsrfCookieName&&_r.read(t.xsrfCookieName);w&&o.set(t.xsrfHeaderName,w)}s===void 0&&o.setContentType(null),"setRequestHeader"in c&&p.forEach(o.toJSON(),function(E,g){c.setRequestHeader(g,E)}),p.isUndefined(t.withCredentials)||(c.withCredentials=!!t.withCredentials),i&&i!=="json"&&(c.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&c.addEventListener("progress",wt(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&c.upload&&c.upload.addEventListener("progress",wt(t.onUploadProgress)),(t.cancelToken||t.signal)&&(a=w=>{c&&(r(!w||w.type?new Ie(null,t,c):w),c.abort(),c=null)},t.cancelToken&&t.cancelToken.subscribe(a),t.signal&&(t.signal.aborted?a():t.signal.addEventListener("abort",a)));const _=wr(u);if(_&&ae.protocols.indexOf(_)===-1){r(new V("Unsupported protocol "+_+":",V.ERR_BAD_REQUEST,t));return}c.send(s||null)})},Fe={http:Xn,xhr:Sr};p.forEach(Fe,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Rr={getAdapter:t=>{t=p.isArray(t)?t:[t];const{length:e}=t;let n,r;for(let s=0;s<e&&(n=t[s],!(r=p.isString(n)?Fe[n.toLowerCase()]:n));s++);if(!r)throw r===!1?new V(`Adapter ${n} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(p.hasOwnProp(Fe,n)?`Adapter '${n}' is not available in the build`:`Unknown adapter '${n}'`);if(!p.isFunction(r))throw new TypeError("adapter is not a function");return r},adapters:Fe};function Xe(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Ie(null,t)}function vt(t){return Xe(t),t.headers=ue.from(t.headers),t.data=Ge.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Rr.getAdapter(t.adapter||rt.adapter)(t).then(function(r){return Xe(t),r.data=Ge.call(t,t.transformResponse,r),r.headers=ue.from(r.headers),r},function(r){return Jt(r)||(Xe(t),r&&r.response&&(r.response.data=Ge.call(t,t.transformResponse,r.response),r.response.headers=ue.from(r.response.headers))),Promise.reject(r)})}const At=t=>t instanceof ue?t.toJSON():t;function Ee(t,e){e=e||{};const n={};function r(c,u,d){return p.isPlainObject(c)&&p.isPlainObject(u)?p.merge.call({caseless:d},c,u):p.isPlainObject(u)?p.merge({},u):p.isArray(u)?u.slice():u}function s(c,u,d){if(p.isUndefined(u)){if(!p.isUndefined(c))return r(void 0,c,d)}else return r(c,u,d)}function o(c,u){if(!p.isUndefined(u))return r(void 0,u)}function i(c,u){if(p.isUndefined(u)){if(!p.isUndefined(c))return r(void 0,c)}else return r(void 0,u)}function a(c,u,d){if(d in e)return r(c,u);if(d in t)return r(void 0,c)}const h={url:o,method:o,data:o,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:a,headers:(c,u)=>s(At(c),At(u),!0)};return p.forEach(Object.keys(Object.assign({},t,e)),function(u){const d=h[u]||s,_=d(t[u],e[u],u);p.isUndefined(_)&&d!==a||(n[u]=_)}),n}const zt="1.4.0",st={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{st[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const St={};st.transitional=function(e,n,r){function s(o,i){return"[Axios v"+zt+"] Transitional option '"+o+"'"+i+(r?". "+r:"")}return(o,i,a)=>{if(e===!1)throw new V(s(i," has been removed"+(n?" in "+n:"")),V.ERR_DEPRECATED);return n&&!St[i]&&(St[i]=!0,console.warn(s(i," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(o,i,a):!0}};function Or(t,e,n){if(typeof t!="object")throw new V("options must be an object",V.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const o=r[s],i=e[o];if(i){const a=t[o],h=a===void 0||i(a,o,t);if(h!==!0)throw new V("option "+o+" must be "+h,V.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new V("Unknown option "+o,V.ERR_BAD_OPTION)}}const $e={assertOptions:Or,validators:st},pe=$e.validators;class Ue{constructor(e){this.defaults=e,this.interceptors={request:new bt,response:new bt}}request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Ee(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:o}=n;r!==void 0&&$e.assertOptions(r,{silentJSONParsing:pe.transitional(pe.boolean),forcedJSONParsing:pe.transitional(pe.boolean),clarifyTimeoutError:pe.transitional(pe.boolean)},!1),s!=null&&(p.isFunction(s)?n.paramsSerializer={serialize:s}:$e.assertOptions(s,{encode:pe.function,serialize:pe.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let i;i=o&&p.merge(o.common,o[n.method]),i&&p.forEach(["delete","get","head","post","put","patch","common"],E=>{delete o[E]}),n.headers=ue.concat(i,o);const a=[];let h=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(n)===!1||(h=h&&g.synchronous,a.unshift(g.fulfilled,g.rejected))});const c=[];this.interceptors.response.forEach(function(g){c.push(g.fulfilled,g.rejected)});let u,d=0,_;if(!h){const E=[vt.bind(this),void 0];for(E.unshift.apply(E,a),E.push.apply(E,c),_=E.length,u=Promise.resolve(n);d<_;)u=u.then(E[d++],E[d++]);return u}_=a.length;let w=n;for(d=0;d<_;){const E=a[d++],g=a[d++];try{w=E(w)}catch(T){g.call(this,T);break}}try{u=vt.call(this,w)}catch(E){return Promise.reject(E)}for(d=0,_=c.length;d<_;)u=u.then(c[d++],c[d++]);return u}getUri(e){e=Ee(this.defaults,e);const n=qt(e.baseURL,e.url);return Mt(n,e.params,e.paramsSerializer)}}p.forEach(["delete","get","head","options"],function(e){Ue.prototype[e]=function(n,r){return this.request(Ee(r||{},{method:e,url:n,data:(r||{}).data}))}});p.forEach(["post","put","patch"],function(e){function n(r){return function(o,i,a){return this.request(Ee(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:i}))}}Ue.prototype[e]=n(),Ue.prototype[e+"Form"]=n(!0)});const xe=Ue;class ot{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const r=this;this.promise.then(s=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](s);r._listeners=null}),this.promise.then=s=>{let o;const i=new Promise(a=>{r.subscribe(a),o=a}).then(s);return i.cancel=function(){r.unsubscribe(o)},i},e(function(o,i,a){r.reason||(r.reason=new Ie(o,i,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new ot(function(s){e=s}),cancel:e}}}const Tr=ot;function Nr(t){return function(n){return t.apply(null,n)}}function kr(t){return p.isObject(t)&&t.isAxiosError===!0}const et={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(et).forEach(([t,e])=>{et[e]=t});const Pr=et;function Wt(t){const e=new xe(t),n=Nt(xe.prototype.request,e);return p.extend(n,xe.prototype,e,{allOwnKeys:!0}),p.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return Wt(Ee(t,s))},n}const $=Wt(rt);$.Axios=xe;$.CanceledError=Ie;$.CancelToken=Tr;$.isCancel=Jt;$.VERSION=zt;$.toFormData=He;$.AxiosError=V;$.Cancel=$.CanceledError;$.all=function(e){return Promise.all(e)};$.spread=Nr;$.isAxiosError=kr;$.mergeConfig=Ee;$.AxiosHeaders=ue;$.formToJSON=t=>Ht(p.isHTMLForm(t)?new FormData(t):t);$.HttpStatusCode=Pr;$.default=$;const Dr=$;function Rt(t,e,n){const r=t.slice();return r[3]=e[n],r}function Cr(t){let e,n=t[3].sender+"",r,s,o,i,a,h=t[3].message+"",c,u,d;return{c(){e=m("b"),r=j(n),s=L(),o=m("br"),i=L(),a=m("p"),c=j(h),u=L(),d=m("br")},l(_){e=y(_,"B",{});var w=b(e);r=M(w,n),w.forEach(f),s=B(_),o=y(_,"BR",{}),i=B(_),a=y(_,"P",{});var E=b(a);c=M(E,h),E.forEach(f),u=B(_),d=y(_,"BR",{})},m(_,w){z(_,e,w),l(e,r),z(_,s,w),z(_,o,w),z(_,i,w),z(_,a,w),l(a,c),z(_,u,w),z(_,d,w)},p(_,w){w&2&&n!==(n=_[3].sender+"")&&me(r,n),w&2&&h!==(h=_[3].message+"")&&me(c,h)},d(_){_&&f(e),_&&f(s),_&&f(o),_&&f(i),_&&f(a),_&&f(u),_&&f(d)}}}function Ir(t){let e,n,r=t[3].sender+"",s,o,i,a,h,c,u,d,_=t[3].message+"",w,E,g,T;return{c(){e=m("div"),n=m("b"),s=j(r),o=L(),i=m("small"),a=j("(Only visible to you)"),h=L(),c=m("br"),u=L(),d=m("p"),w=j(_),E=L(),g=m("br"),T=L(),this.h()},l(S){e=y(S,"DIV",{class:!0,style:!0});var v=b(e);n=y(v,"B",{});var R=b(n);s=M(R,r),R.forEach(f),o=B(v),i=y(v,"SMALL",{});var O=b(i);a=M(O,"(Only visible to you)"),O.forEach(f),h=B(v),c=y(v,"BR",{}),u=B(v),d=y(v,"P",{});var N=b(d);w=M(N,_),N.forEach(f),E=B(v),g=y(v,"BR",{}),T=B(v),v.forEach(f),this.h()},h(){A(e,"class","notification is-primary is-light"),W(e,"font-weight","500",1),W(e,"margin-bottom","2%")},m(S,v){z(S,e,v),l(e,n),l(n,s),l(e,o),l(e,i),l(i,a),l(e,h),l(e,c),l(e,u),l(e,d),l(d,w),l(e,E),l(e,g),l(e,T)},p(S,v){v&2&&r!==(r=S[3].sender+"")&&me(s,r),v&2&&_!==(_=S[3].message+"")&&me(w,_)},d(S){S&&f(e)}}}function Ot(t){let e;function n(o,i){return o[3].sender=="Peace Messenger"?Ir:Cr}let r=n(t),s=r(t);return{c(){s.c(),e=dt()},l(o){s.l(o),e=dt()},m(o,i){s.m(o,i),z(o,e,i)},p(o,i){r===(r=n(o))&&s?s.p(o,i):(s.d(1),s=r(o),s&&(s.c(),s.m(e.parentNode,e)))},d(o){s.d(o),o&&f(e)}}}function Lr(t){let e;return{c(){e=j("Seek Peace")},l(n){e=M(n,"Seek Peace")},m(n,r){z(n,e,r)},d(n){n&&f(e)}}}function Br(t){let e,n,r;return{c(){e=m("span"),n=m("i"),r=j(" Please Wait"),this.h()},l(s){e=y(s,"SPAN",{});var o=b(e);n=y(o,"I",{class:!0}),b(n).forEach(f),r=M(o," Please Wait"),o.forEach(f),this.h()},h(){A(n,"class","fas fa-spinner fa-spin")},m(s,o){z(s,e,o),l(e,n),l(e,r)},d(s){s&&f(e)}}}function Fr(t){let e,n,r,s,o,i,a,h,c,u,d,_,w,E,g,T,S,v,R,O,N,C,U,x,k,P,H,Z,Q,X=t[1],I=[];for(let D=0;D<X.length;D+=1)I[D]=Ot(Rt(t,X,D));function q(D,F){return D[2]?Br:Lr}let K=q(t),G=K(t);return{c(){e=m("div"),n=m("center"),r=m("span"),s=m("b"),o=j("Connected with "),i=j(t[0]),a=L(),h=m("div"),c=m("small");for(let D=0;D<I.length;D+=1)I[D].c();u=L(),d=m("div"),_=m("form"),w=m("div"),E=m("div"),g=m("textarea"),T=L(),S=m("div"),v=m("div"),R=m("button"),O=j("Send"),N=L(),C=m("div"),U=m("button"),G.c(),x=L(),k=m("div"),P=m("button"),H=j("Export"),this.h()},l(D){e=y(D,"DIV",{});var F=b(e);n=y(F,"CENTER",{});var J=b(n);r=y(J,"SPAN",{class:!0});var te=b(r);s=y(te,"B",{});var se=b(s);o=M(se,"Connected with "),i=M(se,t[0]),se.forEach(f),te.forEach(f),J.forEach(f),a=B(F),h=y(F,"DIV",{id:!0,style:!0});var ne=b(h);c=y(ne,"SMALL",{});var fe=b(c);for(let ze=0;ze<I.length;ze+=1)I[ze].l(fe);fe.forEach(f),ne.forEach(f),u=B(F),d=y(F,"DIV",{class:!0});var de=b(d);_=y(de,"FORM",{});var ie=b(_);w=y(ie,"DIV",{class:!0});var he=b(w);E=y(he,"DIV",{class:!0});var Se=b(E);g=y(Se,"TEXTAREA",{class:!0,placeholder:!0}),b(g).forEach(f),Se.forEach(f),he.forEach(f),T=B(ie),S=y(ie,"DIV",{class:!0});var ce=b(S);v=y(ce,"DIV",{class:!0});var it=b(v);R=y(it,"BUTTON",{type:!0,class:!0});var at=b(R);O=M(at,"Send"),at.forEach(f),it.forEach(f),N=B(ce),C=y(ce,"DIV",{class:!0});var lt=b(C);U=y(lt,"BUTTON",{type:!0,class:!0});var ct=b(U);G.l(ct),ct.forEach(f),lt.forEach(f),x=B(ce),k=y(ce,"DIV",{class:!0});var ut=b(k);P=y(ut,"BUTTON",{type:!0,class:!0});var ft=b(P);H=M(ft,"Export"),ft.forEach(f),ut.forEach(f),ce.forEach(f),ie.forEach(f),de.forEach(f),F.forEach(f),this.h()},h(){A(r,"class","tag is-primary is-rounded"),A(h,"id","messages"),W(h,"height","50vh"),W(h,"overflow","scroll"),W(h,"margin-top","2%"),W(h,"display","flex"),W(h,"flex-direction","column-reverse"),A(g,"class","textarea"),A(g,"placeholder","Type your message here"),A(E,"class","control"),A(w,"class","field"),A(R,"type","button"),A(R,"class","button is-info"),A(v,"class","control"),A(U,"type","button"),A(U,"class","button is-primary"),A(C,"class","control"),A(P,"type","button"),A(P,"class","button"),A(k,"class","control"),A(S,"class","field is-grouped"),A(d,"class","footer-fixed")},m(D,F){z(D,e,F),l(e,n),l(n,r),l(r,s),l(s,o),l(s,i),l(e,a),l(e,h),l(h,c);for(let J=0;J<I.length;J+=1)I[J]&&I[J].m(c,null);l(e,u),l(e,d),l(d,_),l(_,w),l(w,E),l(E,g),ee(g,t[3]),l(_,T),l(_,S),l(S,v),l(v,R),l(R,O),l(S,N),l(S,C),l(C,U),G.m(U,null),l(S,x),l(S,k),l(k,P),l(P,H),Z||(Q=[Y(g,"input",t[10]),Y(g,"keyup",t[6]),Y(R,"click",t[11]),Y(U,"click",t[12]),Y(P,"click",t[13])],Z=!0)},p(D,[F]){if(F&1&&me(i,D[0]),F&2){X=D[1];let J;for(J=0;J<X.length;J+=1){const te=Rt(D,X,J);I[J]?I[J].p(te,F):(I[J]=Ot(te),I[J].c(),I[J].m(c,null))}for(;J<I.length;J+=1)I[J].d(1);I.length=X.length}F&8&&ee(g,D[3]),K!==(K=q(D))&&(G.d(1),G=K(D),G&&(G.c(),G.m(U,null)))},i:oe,o:oe,d(D){D&&f(e),Kt(I,D),G.d(),Z=!1,ve(Q)}}}function xr(t,e,n){let{name:r}=e,{peerName:s}=e,{messages:o}=e,{openai_key:i}=e,a;const h=Te();let c=!1;function u(){var R=o.map(N=>N.sender+" : "+N.message+`
`);R=R.join("");var O=document.createElement("a");O.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(R)),O.setAttribute("download","peace_messenger_conversation.txt"),O.style.display="none",document.body.appendChild(O),O.click(),document.body.removeChild(O)}function d(){console.log("sending message");let R={type:"send",sender:r,message:a,timestamp:Math.floor(Date.now()/1e3)};console.log(R),h("message",R),n(3,a="")}function _(R){R.key==="Enter"&&!R.shiftKey&&d()}async function w(R){console.log(i),n(2,c=!0);let O={};try{const N={method:"POST",url:"https://api.openai.com/v1/chat/completions",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},data:{model:"gpt-3.5-turbo",messages:[{role:"user",content:R}]}};O={type:"appendmessage",sender:"Peace Messenger",message:(await Dr.request(N)).data.choices[0].message.content,timestamp:Math.floor(Date.now()/1e3)},console.log(O)}catch{O={type:"appendmessage",sender:"Peace Messenger",message:"Unable to connect to OpenAI or Invalid API Key.",timestamp:Math.floor(Date.now()/1e3)}}h("message",O),n(2,c=!1)}async function E(){console.log("Seeking Peace");let O=o.map(U=>U.sender=="Peace Messenger"?"":U.sender+" : "+U.message+`
`).join("");console.log(O);let N=O.split(" ").slice(-900).join(" "),C=`Analyze the conversation provided then use principles from Marshall Rosenberg's 'Nonviolent Communication: A Language of Life'. Guide ${r} towards peaceful conflict resolution. Include example phrases in quotes as necessary. Limit your response to under six lines 

 ==Conversation Start== 
 ${N} 
 ==Conversation End== 

. Now guide ${r} what he needs to do.`;w(C)}function g(){a=this.value,n(3,a)}const T=()=>d(),S=()=>E(),v=()=>u();return t.$$set=R=>{"name"in R&&n(8,r=R.name),"peerName"in R&&n(0,s=R.peerName),"messages"in R&&n(1,o=R.messages),"openai_key"in R&&n(9,i=R.openai_key)},[s,o,c,a,u,d,_,E,r,i,g,T,S,v]}class Ur extends be{constructor(e){super(),ge(this,e,xr,Fr,we,{name:8,peerName:0,messages:1,openai_key:9})}}function jr(t){let e,n;return e=new Ur({props:{name:t[4],peerName:t[5],messages:t[6],openai_key:t[7]}}),e.$on("message",t[8]),{c(){Ne(e.$$.fragment)},l(r){ke(e.$$.fragment,r)},m(r,s){Pe(e,r,s),n=!0},p(r,s){const o={};s&16&&(o.name=r[4]),s&32&&(o.peerName=r[5]),s&64&&(o.messages=r[6]),s&128&&(o.openai_key=r[7]),e.$set(o)},i(r){n||(_e(e.$$.fragment,r),n=!0)},o(r){ye(e.$$.fragment,r),n=!1},d(r){De(e,r)}}}function Mr(t){let e,n;return e=new pn({props:{offer:t[0],exchangeError:t[1],peer:t[3]}}),e.$on("message",t[8]),{c(){Ne(e.$$.fragment)},l(r){ke(e.$$.fragment,r)},m(r,s){Pe(e,r,s),n=!0},p(r,s){const o={};s&1&&(o.offer=r[0]),s&2&&(o.exchangeError=r[1]),s&8&&(o.peer=r[3]),e.$set(o)},i(r){n||(_e(e.$$.fragment,r),n=!0)},o(r){ye(e.$$.fragment,r),n=!1},d(r){De(e,r)}}}function Vr(t){let e,n;return e=new cn({props:{offer:t[0],peer:t[3]}}),e.$on("message",t[8]),{c(){Ne(e.$$.fragment)},l(r){ke(e.$$.fragment,r)},m(r,s){Pe(e,r,s),n=!0},p(r,s){const o={};s&1&&(o.offer=r[0]),s&8&&(o.peer=r[3]),e.$set(o)},i(r){n||(_e(e.$$.fragment,r),n=!0)},o(r){ye(e.$$.fragment,r),n=!1},d(r){De(e,r)}}}function Hr(t){let e,n;return e=new sn({props:{peer:t[3]}}),e.$on("message",t[8]),{c(){Ne(e.$$.fragment)},l(r){ke(e.$$.fragment,r)},m(r,s){Pe(e,r,s),n=!0},p(r,s){const o={};s&8&&(o.peer=r[3]),e.$set(o)},i(r){n||(_e(e.$$.fragment,r),n=!0)},o(r){ye(e.$$.fragment,r),n=!1},d(r){De(e,r)}}}function Jr(t){let e,n;return e=new tn({props:{peer:t[3]}}),e.$on("message",t[8]),{c(){Ne(e.$$.fragment)},l(r){ke(e.$$.fragment,r)},m(r,s){Pe(e,r,s),n=!0},p(r,s){const o={};s&8&&(o.peer=r[3]),e.$set(o)},i(r){n||(_e(e.$$.fragment,r),n=!0)},o(r){ye(e.$$.fragment,r),n=!1},d(r){De(e,r)}}}function qr(t){let e,n,r,s,o,i,a,h,c,u,d,_,w,E,g,T;const S=[Jr,Hr,Vr,Mr,jr],v=[];function R(O,N){return O[2]=="home"?0:O[2]=="createroom"?1:O[2]=="exchangeoffers"?2:O[2]=="joinroom"?3:O[2]=="chat"?4:-1}return~(u=R(t))&&(d=v[u]=S[u](t)),{c(){e=m("main"),n=m("div"),r=m("div"),s=L(),o=m("div"),i=m("div"),a=m("img"),c=L(),d&&d.c(),_=L(),w=m("div"),this.h()},l(O){e=y(O,"MAIN",{});var N=b(e);n=y(N,"DIV",{class:!0});var C=b(n);r=y(C,"DIV",{class:!0}),b(r).forEach(f),s=B(C),o=y(C,"DIV",{class:!0});var U=b(o);i=y(U,"DIV",{style:!0});var x=b(i);a=y(x,"IMG",{style:!0,src:!0}),c=B(x),d&&d.l(x),x.forEach(f),U.forEach(f),_=B(C),w=y(C,"DIV",{class:!0}),b(w).forEach(f),C.forEach(f),N.forEach(f),this.h()},h(){A(r,"class","column is-4"),W(a,"cursor","default"),Ye(a.src,h="/peace_messenger/logo_2x.png")||A(a,"src",h),W(i,"margin-top","0%"),A(o,"class","column is-4"),A(w,"class","column is-4"),A(n,"class","columns")},m(O,N){z(O,e,N),l(e,n),l(n,r),l(n,s),l(n,o),l(o,i),l(i,a),l(i,c),~u&&v[u].m(i,null),l(n,_),l(n,w),E=!0,g||(T=Y(a,"click",t[9]),g=!0)},p(O,[N]){let C=u;u=R(O),u===C?~u&&v[u].p(O,N):(d&&(Qt(),ye(v[C],1,1,()=>{v[C]=null}),Gt()),~u?(d=v[u],d?d.p(O,N):(d=v[u]=S[u](O),d.c()),_e(d,1),d.m(i,null)):d=null)},i(O){E||(_e(d),E=!0)},o(O){ye(d),E=!1},d(O){O&&f(e),~u&&v[u].d(),g=!1,T()}}}function zr(t,e,n){let r,s,o,i="home",a,h,c,u=[],d,_=!1;function w(S){S.preventDefault(),n(0,r=null),s=null,n(7,d=null),n(4,h=null),n(3,a=null),n(5,c=null),n(6,u=[]),n(2,i="home")}Xt(()=>{_=!0,window.addEventListener("popstate",w)}),Yt(()=>{_&&window.removeEventListener("popstate",w)});function E(S){n(3,a=new SimplePeer({initiator:S,trickle:!1})),n(3,a._debug=console.log,a),a.on("signal",v=>{n(0,r=btoa(JSON.stringify(v)))}),a.on("connect",()=>{console.log("Peer connected!"),i!="chat"&&(n(2,i="chat"),a.send(JSON.stringify({user:"system",type:"name",name:h}))),d&&a.send(JSON.stringify({user:"system",type:"openai",openai_key:d}))}),a.on("data",v=>{v=JSON.parse(v.toString()),v.type=="name"?(n(5,c=v.name),a.send(JSON.stringify({user:"system",type:"name",name:h}))):v.type=="message"?(console.log(v),n(6,u=[...u,v])):v.type=="openai"&&(console.log(v),n(7,d=v.openai_key))}),a.on("error",v=>{i!="chat"&&a.signal(s.trim())})}function g(S){if(console.log(S),S.detail.type=="navigate")n(2,i=S.detail.page),i=="createroom"?(window.history.pushState({page:i},null,null),E(!0)):i=="joinroom"&&(window.history.pushState({page:i},null,null),E(!1));else if(S.detail.type=="join"){console.log("Joining"),s=S.detail.remoteDescription,S.detail.name&&n(4,h=S.detail.name);try{console.log(atob(s)),a.signal(JSON.parse(atob(s.trim())))}catch(v){console.log(v),n(1,o="Please paste a valid code.")}}else S.detail.type=="createroom"?(n(4,h=S.detail.name),n(2,i="exchangeoffers"),console.log("creating Room"),console.log(h),n(7,d=S.detail.openai_key)):S.detail.type=="send"?(console.log("sending"),n(6,u=[...u,S.detail]),a.send(JSON.stringify({sender:S.detail.sender,message:S.detail.message,type:"message",timestamp:S.detail.timestamp}))):S.detail.type=="appendmessage"&&n(6,u=[...u,S.detail])}return[r,o,i,a,h,c,u,d,g,()=>n(2,i="home")]}class Gr extends be{constructor(e){super(),ge(this,e,zr,qr,we,{})}}export{Gr as component,Kr as universal};

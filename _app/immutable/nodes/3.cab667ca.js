import{S as ye,i as _e,s as Ee,k as y,q as M,a as C,l as _,m as g,r as V,c as I,h as d,J as Ot,n as S,p as K,b as z,G as c,K as Z,H as re,L as be,M as Te,N as ee,u as fe,O as Kt,e as ft,d as de,f as Gt,g as he,o as Xt,P as Yt,v as Qt,y as Ne,z as ke,A as Pe,B as De}from"../chunks/index.394dbf96.js";const Zt=!0,Kr=Object.freeze(Object.defineProperty({__proto__:null,prerender:Zt},Symbol.toStringTag,{value:"Module"}));function $t(t){let e,n,r,s,o,i,a,h,l,u,f,m,w,E,b,T,A,v,O,R,k,L,F,B,N,P,H;return{c(){e=y("div"),n=y("p"),r=M(`Peace Messenger serves as your guiding light, assisting
    you with AI in expressing your heartfelt emotions and
    needs to those who are dear to you. 
    `),s=y("br"),o=C(),i=y("center"),a=y("img"),l=C(),u=y("br"),f=M(`    

    This project is an attempt to see if AI can make conversations better and help people understand and respect each other more.`),m=C(),w=y("br"),E=C(),b=y("div"),T=y("button"),A=y("span"),v=M("Create Room"),O=C(),R=y("button"),k=M("Join Room"),L=C(),F=y("div"),B=y("small"),N=M(`Though messages are transmitted with WebRTC peer-to-peer communication, it's also processed with OpenAI. Hence,
        it's not recommended to share any sensitive information.`),this.h()},l(Y){e=_(Y,"DIV",{});var X=g(e);n=_(X,"P",{style:!0});var W=g(n);r=V(W,`Peace Messenger serves as your guiding light, assisting
    you with AI in expressing your heartfelt emotions and
    needs to those who are dear to you. 
    `),s=_(W,"BR",{}),o=I(W),i=_(W,"CENTER",{});var D=g(i);a=_(D,"IMG",{src:!0,style:!0}),D.forEach(d),l=I(W),u=_(W,"BR",{}),f=V(W,`    

    This project is an attempt to see if AI can make conversations better and help people understand and respect each other more.`),W.forEach(d),m=I(X),w=_(X,"BR",{}),E=I(X),b=_(X,"DIV",{class:!0});var q=g(b);T=_(q,"BUTTON",{class:!0});var G=g(T);A=_(G,"SPAN",{});var Q=g(A);v=V(Q,"Create Room"),Q.forEach(d),G.forEach(d),O=I(q),R=_(q,"BUTTON",{class:!0});var x=g(R);k=V(x,"Join Room"),x.forEach(d),q.forEach(d),L=I(X),F=_(X,"DIV",{class:!0,style:!0});var j=g(F);B=_(j,"SMALL",{});var J=g(B);N=V(J,`Though messages are transmitted with WebRTC peer-to-peer communication, it's also processed with OpenAI. Hence,
        it's not recommended to share any sensitive information.`),J.forEach(d),j.forEach(d),X.forEach(d),this.h()},h(){Ot(a.src,h="/peace_messenger/hero.png")||S(a,"src",h),K(a,"height","250px",1),K(n,"text-align","justify",1),K(n,"margin-top","4%"),S(T,"class","button is-info"),S(R,"class","button is-primary"),S(b,"class","buttons"),S(F,"class","notification is-info is-light"),K(F,"text-align","justify",1)},m(Y,X){z(Y,e,X),c(e,n),c(n,r),c(n,s),c(n,o),c(n,i),c(i,a),c(n,l),c(n,u),c(n,f),c(e,m),c(e,w),c(e,E),c(e,b),c(b,T),c(T,A),c(A,v),c(b,O),c(b,R),c(R,k),c(e,L),c(e,F),c(F,B),c(B,N),P||(H=[Z(T,"click",t[1]),Z(R,"click",t[2])],P=!0)},p:re,i:re,o:re,d(Y){Y&&d(e),P=!1,be(H)}}}function en(t){const e=Te();return[e,()=>e("message",{type:"navigate",page:"createroom"}),()=>e("message",{type:"navigate",page:"joinroom"})]}class tn extends ye{constructor(e){super(),_e(this,e,en,$t,Ee,{})}}function dt(t){let e,n;return{c(){e=y("div"),n=M(t[2]),this.h()},l(r){e=_(r,"DIV",{class:!0});var s=g(e);n=V(s,t[2]),s.forEach(d),this.h()},h(){S(e,"class","notification is-danger is-light")},m(r,s){z(r,e,s),c(e,n)},p(r,s){s&4&&fe(n,r[2])},d(r){r&&d(e)}}}function nn(t){let e,n,r,s,o,i,a,h,l,u,f,m,w,E,b,T,A,v,O,R,k,L,F,B,N,P,H,Y,X,W,D=t[2]&&dt(t);return{c(){e=y("div"),n=y("center"),r=y("span"),s=M("Create Room"),o=C(),i=y("form"),a=y("div"),h=y("label"),l=M("First Name"),u=C(),f=y("div"),m=y("input"),w=C(),E=y("div"),b=y("label"),T=M("OpenAI Key"),A=C(),v=y("div"),O=y("input"),R=C(),k=y("p"),L=M("This app doesn't save your key. However, it trasmits to the your friend's system, so that messages are processed using AI. Here's a link on how to generate the OpenAI key."),F=C(),D&&D.c(),B=C(),N=y("div"),P=y("div"),H=y("button"),Y=M("Create Room"),this.h()},l(q){e=_(q,"DIV",{class:!0});var G=g(e);n=_(G,"CENTER",{});var Q=g(n);r=_(Q,"SPAN",{class:!0,style:!0});var x=g(r);s=V(x,"Create Room"),x.forEach(d),Q.forEach(d),o=I(G),i=_(G,"FORM",{});var j=g(i);a=_(j,"DIV",{class:!0});var J=g(a);h=_(J,"LABEL",{class:!0});var ne=g(h);l=V(ne,"First Name"),ne.forEach(d),u=I(J),f=_(J,"DIV",{class:!0});var pe=g(f);m=_(pe,"INPUT",{class:!0,type:!0,placeholder:!0}),pe.forEach(d),J.forEach(d),w=I(j),E=_(j,"DIV",{class:!0});var ie=g(E);b=_(ie,"LABEL",{class:!0});var we=g(b);T=V(we,"OpenAI Key"),we.forEach(d),A=I(ie),v=_(ie,"DIV",{class:!0});var ve=g(v);O=_(ve,"INPUT",{class:!0,type:!0,placeholder:!0}),ve.forEach(d),R=I(ie),k=_(ie,"P",{class:!0});var ue=g(k);L=V(ue,"This app doesn't save your key. However, it trasmits to the your friend's system, so that messages are processed using AI. Here's a link on how to generate the OpenAI key."),ue.forEach(d),ie.forEach(d),F=I(j),D&&D.l(j),B=I(j),N=_(j,"DIV",{class:!0});var Ae=g(N);P=_(Ae,"DIV",{class:!0});var Se=g(P);H=_(Se,"BUTTON",{class:!0});var ae=g(H);Y=V(ae,"Create Room"),ae.forEach(d),Se.forEach(d),Ae.forEach(d),j.forEach(d),G.forEach(d),this.h()},h(){S(r,"class","is-size-4"),K(r,"margin-top","5%"),S(h,"class","label"),S(m,"class","input"),S(m,"type","text"),S(m,"placeholder","John"),S(f,"class","control"),S(a,"class","field"),S(b,"class","label"),S(O,"class","input"),S(O,"type","password"),S(O,"placeholder","Enter your OpenAI key"),S(v,"class","control"),S(k,"class","help"),S(E,"class","field"),S(H,"class","button is-info"),S(P,"class","control"),S(N,"class","field"),S(e,"class","is-pulled-left")},m(q,G){z(q,e,G),c(e,n),c(n,r),c(r,s),c(e,o),c(e,i),c(i,a),c(a,h),c(h,l),c(a,u),c(a,f),c(f,m),ee(m,t[0]),c(i,w),c(i,E),c(E,b),c(b,T),c(E,A),c(E,v),c(v,O),ee(O,t[1]),c(E,R),c(E,k),c(k,L),c(i,F),D&&D.m(i,null),c(i,B),c(i,N),c(N,P),c(P,H),c(H,Y),X||(W=[Z(m,"input",t[4]),Z(O,"input",t[5]),Z(H,"click",t[6])],X=!0)},p(q,[G]){G&1&&m.value!==q[0]&&ee(m,q[0]),G&2&&O.value!==q[1]&&ee(O,q[1]),q[2]?D?D.p(q,G):(D=dt(q),D.c(),D.m(i,B)):D&&(D.d(1),D=null)},i:re,o:re,d(q){q&&d(e),D&&D.d(),X=!1,be(W)}}}function rn(t,e,n){const r=Te();let s,o,i;function a(){if(!s||!o||s.length==0||o.length==0){n(2,i="Please enter your First Name and OpenAI Key");return}r("message",{type:"createroom",name:s,openai_key:o})}function h(){s=this.value,n(0,s)}function l(){o=this.value,n(1,o)}return[s,o,i,a,h,l,()=>a()]}class sn extends ye{constructor(e){super(),_e(this,e,rn,nn,Ee,{})}}function on(t){let e,n,r,s,o,i,a,h,l,u,f,m,w,E,b,T,A,v,O,R,k,L,F,B,N;return{c(){e=y("form"),n=y("div"),r=y("div"),s=y("small"),o=M(`Please forward the below code to your friend, inviting them to
                enter the room.`),i=C(),a=y("div"),h=y("textarea"),l=C(),u=y("br"),f=C(),m=y("div"),w=y("label"),E=y("small"),b=M(`After your friend enters your code, another is produced for
                them. You need to input that here to connect with them.`),T=C(),A=y("div"),v=y("textarea"),O=C(),R=y("div"),k=y("div"),L=y("button"),F=M("Start Chatting"),this.h()},l(P){e=_(P,"FORM",{style:!0});var H=g(e);n=_(H,"DIV",{class:!0});var Y=g(n);r=_(Y,"DIV",{class:!0,style:!0});var X=g(r);s=_(X,"SMALL",{style:!0});var W=g(s);o=V(W,`Please forward the below code to your friend, inviting them to
                enter the room.`),W.forEach(d),X.forEach(d),i=I(Y),a=_(Y,"DIV",{class:!0});var D=g(a);h=_(D,"TEXTAREA",{class:!0}),g(h).forEach(d),D.forEach(d),Y.forEach(d),l=I(H),u=_(H,"BR",{}),f=I(H),m=_(H,"DIV",{class:!0});var q=g(m);w=_(q,"LABEL",{class:!0,style:!0});var G=g(w);E=_(G,"SMALL",{});var Q=g(E);b=V(Q,`After your friend enters your code, another is produced for
                them. You need to input that here to connect with them.`),Q.forEach(d),G.forEach(d),T=I(q),A=_(q,"DIV",{class:!0});var x=g(A);v=_(x,"TEXTAREA",{class:!0,placeholder:!0}),g(v).forEach(d),x.forEach(d),q.forEach(d),O=I(H),R=_(H,"DIV",{class:!0});var j=g(R);k=_(j,"DIV",{class:!0});var J=g(k);L=_(J,"BUTTON",{class:!0});var ne=g(L);F=V(ne,"Start Chatting"),ne.forEach(d),J.forEach(d),j.forEach(d),H.forEach(d),this.h()},h(){K(s,"font-weight","500",1),S(r,"class","notification is-info is-light"),K(r,"font-weight","500",1),K(r,"margin-bottom","2%"),S(h,"class","textarea"),h.readOnly=!0,S(a,"class","control"),S(n,"class","field"),S(w,"class","label"),K(w,"font-weight","500",1),S(v,"class","textarea"),S(v,"placeholder","Enter your friend's code here"),S(A,"class","control"),S(m,"class","field"),S(L,"class","button is-info"),S(k,"class","control"),S(R,"class","field"),K(e,"margin-top","4%")},m(P,H){z(P,e,H),c(e,n),c(n,r),c(r,s),c(s,o),c(n,i),c(n,a),c(a,h),ee(h,t[0]),c(e,l),c(e,u),c(e,f),c(e,m),c(m,w),c(w,E),c(E,b),c(m,T),c(m,A),c(A,v),ee(v,t[1]),c(e,O),c(e,R),c(R,k),c(k,L),c(L,F),B||(N=[Z(h,"click",an),Z(h,"input",t[3]),Z(v,"input",t[4]),Z(L,"click",t[5])],B=!0)},p(P,[H]){H&1&&ee(h,P[0]),H&2&&ee(v,P[1])},i:re,o:re,d(P){P&&d(e),B=!1,be(N)}}}function an(t){t.target.select()}function ln(t,e,n){const r=Te();let{offer:s}=e,{recievedOffer:o}=e;function i(){s=this.value,n(0,s)}function a(){o=this.value,n(1,o)}const h=()=>r("message",{type:"join",remoteDescription:o});return t.$$set=l=>{"offer"in l&&n(0,s=l.offer),"recievedOffer"in l&&n(1,o=l.recievedOffer)},[s,o,r,i,a,h]}class cn extends ye{constructor(e){super(),_e(this,e,ln,on,Ee,{offer:0,recievedOffer:1})}}function un(t){let e,n,r,s,o,i,a,h,l,u,f,m,w,E,b,T,A,v,O,R,k,L,F,B=t[1]&&ht(t);return{c(){e=y("div"),n=y("label"),r=y("small"),s=M(`Please paste the code shared by your friend who created the
                    room.`),o=C(),i=y("div"),a=y("textarea"),h=C(),B&&B.c(),l=C(),u=y("div"),f=y("label"),m=y("small"),w=M("Name"),E=C(),b=y("div"),T=y("textarea"),A=C(),v=y("div"),O=y("div"),R=y("button"),k=M("Join Room"),this.h()},l(N){e=_(N,"DIV",{class:!0});var P=g(e);n=_(P,"LABEL",{class:!0,style:!0});var H=g(n);r=_(H,"SMALL",{});var Y=g(r);s=V(Y,`Please paste the code shared by your friend who created the
                    room.`),Y.forEach(d),H.forEach(d),o=I(P),i=_(P,"DIV",{class:!0});var X=g(i);a=_(X,"TEXTAREA",{class:!0}),g(a).forEach(d),X.forEach(d),P.forEach(d),h=I(N),B&&B.l(N),l=I(N),u=_(N,"DIV",{class:!0});var W=g(u);f=_(W,"LABEL",{class:!0,style:!0});var D=g(f);m=_(D,"SMALL",{});var q=g(m);w=V(q,"Name"),q.forEach(d),D.forEach(d),E=I(W),b=_(W,"DIV",{class:!0});var G=g(b);T=_(G,"TEXTAREA",{class:!0,placeholder:!0}),g(T).forEach(d),G.forEach(d),W.forEach(d),A=I(N),v=_(N,"DIV",{class:!0});var Q=g(v);O=_(Q,"DIV",{class:!0});var x=g(O);R=_(x,"BUTTON",{class:!0});var j=g(R);k=V(j,"Join Room"),j.forEach(d),x.forEach(d),Q.forEach(d),this.h()},h(){S(n,"class","label"),K(n,"font-weight","500",1),S(a,"class","textarea"),S(i,"class","control"),S(e,"class","field"),S(f,"class","label"),K(f,"font-weight","500",1),S(T,"class","input"),S(T,"placeholder","John"),S(b,"class","control"),S(u,"class","field"),S(R,"class","button is-info"),S(O,"class","control"),S(v,"class","field")},m(N,P){z(N,e,P),c(e,n),c(n,r),c(r,s),c(e,o),c(e,i),c(i,a),ee(a,t[3]),z(N,h,P),B&&B.m(N,P),z(N,l,P),z(N,u,P),c(u,f),c(f,m),c(m,w),c(u,E),c(u,b),c(b,T),ee(T,t[2]),z(N,A,P),z(N,v,P),c(v,O),c(O,R),c(R,k),L||(F=[Z(a,"click",Tt),Z(a,"input",t[6]),Z(T,"input",t[7]),Z(R,"click",t[8])],L=!0)},p(N,P){P&8&&ee(a,N[3]),N[1]?B?B.p(N,P):(B=ht(N),B.c(),B.m(l.parentNode,l)):B&&(B.d(1),B=null),P&4&&ee(T,N[2])},d(N){N&&d(e),N&&d(h),B&&B.d(N),N&&d(l),N&&d(u),N&&d(A),N&&d(v),L=!1,be(F)}}}function fn(t){let e,n,r,s,o,i,a,h,l,u,f,m,w,E;return{c(){e=y("div"),n=y("div"),r=y("small"),s=M(`Please forward the below code to your friend, once they
                    enter this, you will be automatically connected.`),o=C(),i=y("div"),a=y("textarea"),h=C(),l=y("button"),u=y("span"),f=y("i"),m=M(" Waiting"),this.h()},l(b){e=_(b,"DIV",{class:!0});var T=g(e);n=_(T,"DIV",{class:!0,style:!0});var A=g(n);r=_(A,"SMALL",{style:!0});var v=g(r);s=V(v,`Please forward the below code to your friend, once they
                    enter this, you will be automatically connected.`),v.forEach(d),A.forEach(d),o=I(T),i=_(T,"DIV",{class:!0});var O=g(i);a=_(O,"TEXTAREA",{class:!0}),g(a).forEach(d),O.forEach(d),T.forEach(d),h=I(b),l=_(b,"BUTTON",{class:!0});var R=g(l);u=_(R,"SPAN",{});var k=g(u);f=_(k,"I",{class:!0}),g(f).forEach(d),m=V(k," Waiting"),k.forEach(d),R.forEach(d),this.h()},h(){K(r,"font-weight","550",1),S(n,"class","notification is-info is-light"),K(n,"font-weight","550",1),K(n,"margin-bottom","2%"),S(a,"class","textarea"),a.readOnly=!0,S(i,"class","control"),S(e,"class","field"),S(f,"class","fas fa-spinner fa-spin"),S(l,"class","button is-info")},m(b,T){z(b,e,T),c(e,n),c(n,r),c(r,s),c(e,o),c(e,i),c(i,a),ee(a,t[0]),z(b,h,T),z(b,l,T),c(l,u),c(u,f),c(u,m),w||(E=[Z(a,"click",Tt),Z(a,"input",t[5])],w=!0)},p(b,T){T&1&&ee(a,b[0])},d(b){b&&d(e),b&&d(h),b&&d(l),w=!1,be(E)}}}function ht(t){let e,n,r;return{c(){e=y("div"),n=y("small"),r=M(t[1]),this.h()},l(s){e=_(s,"DIV",{class:!0});var o=g(e);n=_(o,"SMALL",{});var i=g(n);r=V(i,t[1]),i.forEach(d),o.forEach(d),this.h()},h(){S(e,"class","notification is-danger is-light")},m(s,o){z(s,e,o),c(e,n),c(n,r)},p(s,o){o&2&&fe(r,s[1])},d(s){s&&d(e)}}}function dn(t){let e,n,r,s,o,i;function a(u,f){return u[0]?fn:un}let h=a(t),l=h(t);return{c(){e=y("div"),n=y("center"),r=y("span"),s=M("Join Room"),o=C(),i=y("form"),l.c(),this.h()},l(u){e=_(u,"DIV",{});var f=g(e);n=_(f,"CENTER",{});var m=g(n);r=_(m,"SPAN",{class:!0,style:!0});var w=g(r);s=V(w,"Join Room"),w.forEach(d),m.forEach(d),o=I(f),i=_(f,"FORM",{style:!0});var E=g(i);l.l(E),E.forEach(d),f.forEach(d),this.h()},h(){S(r,"class","is-size-4"),K(r,"margin-top","5%"),K(i,"margin-top","4%")},m(u,f){z(u,e,f),c(e,n),c(n,r),c(r,s),c(e,o),c(e,i),l.m(i,null)},p(u,[f]){h===(h=a(u))&&l?l.p(u,f):(l.d(1),l=h(u),l&&(l.c(),l.m(i,null)))},i:re,o:re,d(u){u&&d(e),l.d()}}}function Tt(t){t.target.select()}function hn(t,e,n){const r=Te();let{offer:s}=e,{exchangeError:o}=e,i,a;function h(){s=this.value,n(0,s)}function l(){a=this.value,n(3,a)}function u(){i=this.value,n(2,i)}const f=()=>r("message",{type:"join",remoteDescription:a,name:i});return t.$$set=m=>{"offer"in m&&n(0,s=m.offer),"exchangeError"in m&&n(1,o=m.exchangeError)},[s,o,i,a,r,h,l,u,f]}class pn extends ye{constructor(e){super(),_e(this,e,hn,dn,Ee,{offer:0,exchangeError:1})}}function Nt(t,e){return function(){return t.apply(e,arguments)}}const{toString:mn}=Object.prototype,{getPrototypeOf:et}=Object,je=(t=>e=>{const n=mn.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),oe=t=>(t=t.toLowerCase(),e=>je(e)===t),Me=t=>e=>typeof e===t,{isArray:ge}=Array,Oe=Me("undefined");function yn(t){return t!==null&&!Oe(t)&&t.constructor!==null&&!Oe(t.constructor)&&te(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const kt=oe("ArrayBuffer");function _n(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&kt(t.buffer),e}const En=Me("string"),te=Me("function"),Pt=Me("number"),Ve=t=>t!==null&&typeof t=="object",bn=t=>t===!0||t===!1,Le=t=>{if(je(t)!=="object")return!1;const e=et(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},gn=oe("Date"),wn=oe("File"),vn=oe("Blob"),An=oe("FileList"),Sn=t=>Ve(t)&&te(t.pipe),Rn=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||te(t.append)&&((e=je(t))==="formdata"||e==="object"&&te(t.toString)&&t.toString()==="[object FormData]"))},On=oe("URLSearchParams"),Tn=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ce(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),ge(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{const o=n?Object.getOwnPropertyNames(t):Object.keys(t),i=o.length;let a;for(r=0;r<i;r++)a=o[r],e.call(null,t[a],a,t)}}function Dt(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const Ct=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),It=t=>!Oe(t)&&t!==Ct;function Ye(){const{caseless:t}=It(this)&&this||{},e={},n=(r,s)=>{const o=t&&Dt(e,s)||s;Le(e[o])&&Le(r)?e[o]=Ye(e[o],r):Le(r)?e[o]=Ye({},r):ge(r)?e[o]=r.slice():e[o]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&Ce(arguments[r],n);return e}const Nn=(t,e,n,{allOwnKeys:r}={})=>(Ce(e,(s,o)=>{n&&te(s)?t[o]=Nt(s,n):t[o]=s},{allOwnKeys:r}),t),kn=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Pn=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},Dn=(t,e,n,r)=>{let s,o,i;const a={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),o=s.length;o-- >0;)i=s[o],(!r||r(i,t,e))&&!a[i]&&(e[i]=t[i],a[i]=!0);t=n!==!1&&et(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},Cn=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},In=t=>{if(!t)return null;if(ge(t))return t;let e=t.length;if(!Pt(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},Ln=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&et(Uint8Array)),Bn=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=r.next())&&!s.done;){const o=s.value;e.call(t,o[0],o[1])}},Fn=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},xn=oe("HTMLFormElement"),Un=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),pt=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),jn=oe("RegExp"),Lt=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Ce(n,(s,o)=>{e(s,o,t)!==!1&&(r[o]=s)}),Object.defineProperties(t,r)},Mn=t=>{Lt(t,(e,n)=>{if(te(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(te(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Vn=(t,e)=>{const n={},r=s=>{s.forEach(o=>{n[o]=!0})};return ge(t)?r(t):r(String(t).split(e)),n},Hn=()=>{},Jn=(t,e)=>(t=+t,Number.isFinite(t)?t:e),We="abcdefghijklmnopqrstuvwxyz",mt="0123456789",Bt={DIGIT:mt,ALPHA:We,ALPHA_DIGIT:We+We.toUpperCase()+mt},qn=(t=16,e=Bt.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function zn(t){return!!(t&&te(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const Wn=t=>{const e=new Array(10),n=(r,s)=>{if(Ve(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[s]=r;const o=ge(r)?[]:{};return Ce(r,(i,a)=>{const h=n(i,s+1);!Oe(h)&&(o[a]=h)}),e[s]=void 0,o}}return r};return n(t,0)},Kn=oe("AsyncFunction"),Gn=t=>t&&(Ve(t)||te(t))&&te(t.then)&&te(t.catch),p={isArray:ge,isArrayBuffer:kt,isBuffer:yn,isFormData:Rn,isArrayBufferView:_n,isString:En,isNumber:Pt,isBoolean:bn,isObject:Ve,isPlainObject:Le,isUndefined:Oe,isDate:gn,isFile:wn,isBlob:vn,isRegExp:jn,isFunction:te,isStream:Sn,isURLSearchParams:On,isTypedArray:Ln,isFileList:An,forEach:Ce,merge:Ye,extend:Nn,trim:Tn,stripBOM:kn,inherits:Pn,toFlatObject:Dn,kindOf:je,kindOfTest:oe,endsWith:Cn,toArray:In,forEachEntry:Bn,matchAll:Fn,isHTMLForm:xn,hasOwnProperty:pt,hasOwnProp:pt,reduceDescriptors:Lt,freezeMethods:Mn,toObjectSet:Vn,toCamelCase:Un,noop:Hn,toFiniteNumber:Jn,findKey:Dt,global:Ct,isContextDefined:It,ALPHABET:Bt,generateString:qn,isSpecCompliantForm:zn,toJSONObject:Wn,isAsyncFn:Kn,isThenable:Gn};function U(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s)}p.inherits(U,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:p.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Ft=U.prototype,xt={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{xt[t]={value:t}});Object.defineProperties(U,xt);Object.defineProperty(Ft,"isAxiosError",{value:!0});U.from=(t,e,n,r,s,o)=>{const i=Object.create(Ft);return p.toFlatObject(t,i,function(h){return h!==Error.prototype},a=>a!=="isAxiosError"),U.call(i,t.message,e,n,r,s),i.cause=t,i.name=t.name,o&&Object.assign(i,o),i};const Xn=null;function Qe(t){return p.isPlainObject(t)||p.isArray(t)}function Ut(t){return p.endsWith(t,"[]")?t.slice(0,-2):t}function yt(t,e,n){return t?t.concat(e).map(function(s,o){return s=Ut(s),!n&&o?"["+s+"]":s}).join(n?".":""):e}function Yn(t){return p.isArray(t)&&!t.some(Qe)}const Qn=p.toFlatObject(p,{},null,function(e){return/^is[A-Z]/.test(e)});function He(t,e,n){if(!p.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=p.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,T){return!p.isUndefined(T[b])});const r=n.metaTokens,s=n.visitor||u,o=n.dots,i=n.indexes,h=(n.Blob||typeof Blob<"u"&&Blob)&&p.isSpecCompliantForm(e);if(!p.isFunction(s))throw new TypeError("visitor must be a function");function l(E){if(E===null)return"";if(p.isDate(E))return E.toISOString();if(!h&&p.isBlob(E))throw new U("Blob is not supported. Use a Buffer instead.");return p.isArrayBuffer(E)||p.isTypedArray(E)?h&&typeof Blob=="function"?new Blob([E]):Buffer.from(E):E}function u(E,b,T){let A=E;if(E&&!T&&typeof E=="object"){if(p.endsWith(b,"{}"))b=r?b:b.slice(0,-2),E=JSON.stringify(E);else if(p.isArray(E)&&Yn(E)||(p.isFileList(E)||p.endsWith(b,"[]"))&&(A=p.toArray(E)))return b=Ut(b),A.forEach(function(O,R){!(p.isUndefined(O)||O===null)&&e.append(i===!0?yt([b],R,o):i===null?b:b+"[]",l(O))}),!1}return Qe(E)?!0:(e.append(yt(T,b,o),l(E)),!1)}const f=[],m=Object.assign(Qn,{defaultVisitor:u,convertValue:l,isVisitable:Qe});function w(E,b){if(!p.isUndefined(E)){if(f.indexOf(E)!==-1)throw Error("Circular reference detected in "+b.join("."));f.push(E),p.forEach(E,function(A,v){(!(p.isUndefined(A)||A===null)&&s.call(e,A,p.isString(v)?v.trim():v,b,m))===!0&&w(A,b?b.concat(v):[v])}),f.pop()}}if(!p.isObject(t))throw new TypeError("data must be an object");return w(t),e}function _t(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function tt(t,e){this._pairs=[],t&&He(t,this,e)}const jt=tt.prototype;jt.append=function(e,n){this._pairs.push([e,n])};jt.toString=function(e){const n=e?function(r){return e.call(this,r,_t)}:_t;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function Zn(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Mt(t,e,n){if(!e)return t;const r=n&&n.encode||Zn,s=n&&n.serialize;let o;if(s?o=s(e,n):o=p.isURLSearchParams(e)?e.toString():new tt(e,n).toString(r),o){const i=t.indexOf("#");i!==-1&&(t=t.slice(0,i)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}class $n{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){p.forEach(this.handlers,function(r){r!==null&&e(r)})}}const Et=$n,Vt={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},er=typeof URLSearchParams<"u"?URLSearchParams:tt,tr=typeof FormData<"u"?FormData:null,nr=typeof Blob<"u"?Blob:null,rr=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),sr=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),se={isBrowser:!0,classes:{URLSearchParams:er,FormData:tr,Blob:nr},isStandardBrowserEnv:rr,isStandardBrowserWebWorkerEnv:sr,protocols:["http","https","file","blob","url","data"]};function or(t,e){return He(t,new se.classes.URLSearchParams,Object.assign({visitor:function(n,r,s,o){return se.isNode&&p.isBuffer(n)?(this.append(r,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},e))}function ir(t){return p.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function ar(t){const e={},n=Object.keys(t);let r;const s=n.length;let o;for(r=0;r<s;r++)o=n[r],e[o]=t[o];return e}function Ht(t){function e(n,r,s,o){let i=n[o++];const a=Number.isFinite(+i),h=o>=n.length;return i=!i&&p.isArray(s)?s.length:i,h?(p.hasOwnProp(s,i)?s[i]=[s[i],r]:s[i]=r,!a):((!s[i]||!p.isObject(s[i]))&&(s[i]=[]),e(n,r,s[i],o)&&p.isArray(s[i])&&(s[i]=ar(s[i])),!a)}if(p.isFormData(t)&&p.isFunction(t.entries)){const n={};return p.forEachEntry(t,(r,s)=>{e(ir(r),s,n,0)}),n}return null}const lr={"Content-Type":void 0};function cr(t,e,n){if(p.isString(t))try{return(e||JSON.parse)(t),p.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Je={transitional:Vt,adapter:["xhr","http"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,o=p.isObject(e);if(o&&p.isHTMLForm(e)&&(e=new FormData(e)),p.isFormData(e))return s&&s?JSON.stringify(Ht(e)):e;if(p.isArrayBuffer(e)||p.isBuffer(e)||p.isStream(e)||p.isFile(e)||p.isBlob(e))return e;if(p.isArrayBufferView(e))return e.buffer;if(p.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return or(e,this.formSerializer).toString();if((a=p.isFileList(e))||r.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return He(a?{"files[]":e}:e,h&&new h,this.formSerializer)}}return o||s?(n.setContentType("application/json",!1),cr(e)):e}],transformResponse:[function(e){const n=this.transitional||Je.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(e&&p.isString(e)&&(r&&!this.responseType||s)){const i=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(a){if(i)throw a.name==="SyntaxError"?U.from(a,U.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:se.classes.FormData,Blob:se.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};p.forEach(["delete","get","head"],function(e){Je.headers[e]={}});p.forEach(["post","put","patch"],function(e){Je.headers[e]=p.merge(lr)});const nt=Je,ur=p.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),fr=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(i){s=i.indexOf(":"),n=i.substring(0,s).trim().toLowerCase(),r=i.substring(s+1).trim(),!(!n||e[n]&&ur[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},bt=Symbol("internals");function Re(t){return t&&String(t).trim().toLowerCase()}function Be(t){return t===!1||t==null?t:p.isArray(t)?t.map(Be):String(t)}function dr(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const hr=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Ke(t,e,n,r,s){if(p.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!p.isString(e)){if(p.isString(r))return e.indexOf(r)!==-1;if(p.isRegExp(r))return r.test(e)}}function pr(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function mr(t,e){const n=p.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,o,i){return this[r].call(this,e,s,o,i)},configurable:!0})})}class qe{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function o(a,h,l){const u=Re(h);if(!u)throw new Error("header name must be a non-empty string");const f=p.findKey(s,u);(!f||s[f]===void 0||l===!0||l===void 0&&s[f]!==!1)&&(s[f||h]=Be(a))}const i=(a,h)=>p.forEach(a,(l,u)=>o(l,u,h));return p.isPlainObject(e)||e instanceof this.constructor?i(e,n):p.isString(e)&&(e=e.trim())&&!hr(e)?i(fr(e),n):e!=null&&o(n,e,r),this}get(e,n){if(e=Re(e),e){const r=p.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return dr(s);if(p.isFunction(n))return n.call(this,s,r);if(p.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Re(e),e){const r=p.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||Ke(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function o(i){if(i=Re(i),i){const a=p.findKey(r,i);a&&(!n||Ke(r,r[a],a,n))&&(delete r[a],s=!0)}}return p.isArray(e)?e.forEach(o):o(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const o=n[r];(!e||Ke(this,this[o],o,e,!0))&&(delete this[o],s=!0)}return s}normalize(e){const n=this,r={};return p.forEach(this,(s,o)=>{const i=p.findKey(r,o);if(i){n[i]=Be(s),delete n[o];return}const a=e?pr(o):String(o).trim();a!==o&&delete n[o],n[a]=Be(s),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return p.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&p.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[bt]=this[bt]={accessors:{}}).accessors,s=this.prototype;function o(i){const a=Re(i);r[a]||(mr(s,i),r[a]=!0)}return p.isArray(e)?e.forEach(o):o(e),this}}qe.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);p.freezeMethods(qe.prototype);p.freezeMethods(qe);const le=qe;function Ge(t,e){const n=this||nt,r=e||n,s=le.from(r.headers);let o=r.data;return p.forEach(t,function(a){o=a.call(n,o,s.normalize(),e?e.status:void 0)}),s.normalize(),o}function Jt(t){return!!(t&&t.__CANCEL__)}function Ie(t,e,n){U.call(this,t??"canceled",U.ERR_CANCELED,e,n),this.name="CanceledError"}p.inherits(Ie,U,{__CANCEL__:!0});function yr(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new U("Request failed with status code "+n.status,[U.ERR_BAD_REQUEST,U.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const _r=se.isStandardBrowserEnv?function(){return{write:function(n,r,s,o,i,a){const h=[];h.push(n+"="+encodeURIComponent(r)),p.isNumber(s)&&h.push("expires="+new Date(s).toGMTString()),p.isString(o)&&h.push("path="+o),p.isString(i)&&h.push("domain="+i),a===!0&&h.push("secure"),document.cookie=h.join("; ")},read:function(n){const r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function Er(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function br(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function qt(t,e){return t&&!Er(e)?br(t,e):e}const gr=se.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function s(o){let i=o;return e&&(n.setAttribute("href",i),i=n.href),n.setAttribute("href",i),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=s(window.location.href),function(i){const a=p.isString(i)?s(i):i;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}();function wr(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function vr(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,o=0,i;return e=e!==void 0?e:1e3,function(h){const l=Date.now(),u=r[o];i||(i=l),n[s]=h,r[s]=l;let f=o,m=0;for(;f!==s;)m+=n[f++],f=f%t;if(s=(s+1)%t,s===o&&(o=(o+1)%t),l-i<e)return;const w=u&&l-u;return w?Math.round(m*1e3/w):void 0}}function gt(t,e){let n=0;const r=vr(50,250);return s=>{const o=s.loaded,i=s.lengthComputable?s.total:void 0,a=o-n,h=r(a),l=o<=i;n=o;const u={loaded:o,total:i,progress:i?o/i:void 0,bytes:a,rate:h||void 0,estimated:h&&i&&l?(i-o)/h:void 0,event:s};u[e?"download":"upload"]=!0,t(u)}}const Ar=typeof XMLHttpRequest<"u",Sr=Ar&&function(t){return new Promise(function(n,r){let s=t.data;const o=le.from(t.headers).normalize(),i=t.responseType;let a;function h(){t.cancelToken&&t.cancelToken.unsubscribe(a),t.signal&&t.signal.removeEventListener("abort",a)}p.isFormData(s)&&(se.isStandardBrowserEnv||se.isStandardBrowserWebWorkerEnv?o.setContentType(!1):o.setContentType("multipart/form-data;",!1));let l=new XMLHttpRequest;if(t.auth){const w=t.auth.username||"",E=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";o.set("Authorization","Basic "+btoa(w+":"+E))}const u=qt(t.baseURL,t.url);l.open(t.method.toUpperCase(),Mt(u,t.params,t.paramsSerializer),!0),l.timeout=t.timeout;function f(){if(!l)return;const w=le.from("getAllResponseHeaders"in l&&l.getAllResponseHeaders()),b={data:!i||i==="text"||i==="json"?l.responseText:l.response,status:l.status,statusText:l.statusText,headers:w,config:t,request:l};yr(function(A){n(A),h()},function(A){r(A),h()},b),l=null}if("onloadend"in l?l.onloadend=f:l.onreadystatechange=function(){!l||l.readyState!==4||l.status===0&&!(l.responseURL&&l.responseURL.indexOf("file:")===0)||setTimeout(f)},l.onabort=function(){l&&(r(new U("Request aborted",U.ECONNABORTED,t,l)),l=null)},l.onerror=function(){r(new U("Network Error",U.ERR_NETWORK,t,l)),l=null},l.ontimeout=function(){let E=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const b=t.transitional||Vt;t.timeoutErrorMessage&&(E=t.timeoutErrorMessage),r(new U(E,b.clarifyTimeoutError?U.ETIMEDOUT:U.ECONNABORTED,t,l)),l=null},se.isStandardBrowserEnv){const w=(t.withCredentials||gr(u))&&t.xsrfCookieName&&_r.read(t.xsrfCookieName);w&&o.set(t.xsrfHeaderName,w)}s===void 0&&o.setContentType(null),"setRequestHeader"in l&&p.forEach(o.toJSON(),function(E,b){l.setRequestHeader(b,E)}),p.isUndefined(t.withCredentials)||(l.withCredentials=!!t.withCredentials),i&&i!=="json"&&(l.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&l.addEventListener("progress",gt(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&l.upload&&l.upload.addEventListener("progress",gt(t.onUploadProgress)),(t.cancelToken||t.signal)&&(a=w=>{l&&(r(!w||w.type?new Ie(null,t,l):w),l.abort(),l=null)},t.cancelToken&&t.cancelToken.subscribe(a),t.signal&&(t.signal.aborted?a():t.signal.addEventListener("abort",a)));const m=wr(u);if(m&&se.protocols.indexOf(m)===-1){r(new U("Unsupported protocol "+m+":",U.ERR_BAD_REQUEST,t));return}l.send(s||null)})},Fe={http:Xn,xhr:Sr};p.forEach(Fe,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Rr={getAdapter:t=>{t=p.isArray(t)?t:[t];const{length:e}=t;let n,r;for(let s=0;s<e&&(n=t[s],!(r=p.isString(n)?Fe[n.toLowerCase()]:n));s++);if(!r)throw r===!1?new U(`Adapter ${n} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(p.hasOwnProp(Fe,n)?`Adapter '${n}' is not available in the build`:`Unknown adapter '${n}'`);if(!p.isFunction(r))throw new TypeError("adapter is not a function");return r},adapters:Fe};function Xe(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Ie(null,t)}function wt(t){return Xe(t),t.headers=le.from(t.headers),t.data=Ge.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Rr.getAdapter(t.adapter||nt.adapter)(t).then(function(r){return Xe(t),r.data=Ge.call(t,t.transformResponse,r),r.headers=le.from(r.headers),r},function(r){return Jt(r)||(Xe(t),r&&r.response&&(r.response.data=Ge.call(t,t.transformResponse,r.response),r.response.headers=le.from(r.response.headers))),Promise.reject(r)})}const vt=t=>t instanceof le?t.toJSON():t;function me(t,e){e=e||{};const n={};function r(l,u,f){return p.isPlainObject(l)&&p.isPlainObject(u)?p.merge.call({caseless:f},l,u):p.isPlainObject(u)?p.merge({},u):p.isArray(u)?u.slice():u}function s(l,u,f){if(p.isUndefined(u)){if(!p.isUndefined(l))return r(void 0,l,f)}else return r(l,u,f)}function o(l,u){if(!p.isUndefined(u))return r(void 0,u)}function i(l,u){if(p.isUndefined(u)){if(!p.isUndefined(l))return r(void 0,l)}else return r(void 0,u)}function a(l,u,f){if(f in e)return r(l,u);if(f in t)return r(void 0,l)}const h={url:o,method:o,data:o,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:a,headers:(l,u)=>s(vt(l),vt(u),!0)};return p.forEach(Object.keys(Object.assign({},t,e)),function(u){const f=h[u]||s,m=f(t[u],e[u],u);p.isUndefined(m)&&f!==a||(n[u]=m)}),n}const zt="1.4.0",rt={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{rt[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const At={};rt.transitional=function(e,n,r){function s(o,i){return"[Axios v"+zt+"] Transitional option '"+o+"'"+i+(r?". "+r:"")}return(o,i,a)=>{if(e===!1)throw new U(s(i," has been removed"+(n?" in "+n:"")),U.ERR_DEPRECATED);return n&&!At[i]&&(At[i]=!0,console.warn(s(i," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(o,i,a):!0}};function Or(t,e,n){if(typeof t!="object")throw new U("options must be an object",U.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const o=r[s],i=e[o];if(i){const a=t[o],h=a===void 0||i(a,o,t);if(h!==!0)throw new U("option "+o+" must be "+h,U.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new U("Unknown option "+o,U.ERR_BAD_OPTION)}}const Ze={assertOptions:Or,validators:rt},ce=Ze.validators;class Ue{constructor(e){this.defaults=e,this.interceptors={request:new Et,response:new Et}}request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=me(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:o}=n;r!==void 0&&Ze.assertOptions(r,{silentJSONParsing:ce.transitional(ce.boolean),forcedJSONParsing:ce.transitional(ce.boolean),clarifyTimeoutError:ce.transitional(ce.boolean)},!1),s!=null&&(p.isFunction(s)?n.paramsSerializer={serialize:s}:Ze.assertOptions(s,{encode:ce.function,serialize:ce.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let i;i=o&&p.merge(o.common,o[n.method]),i&&p.forEach(["delete","get","head","post","put","patch","common"],E=>{delete o[E]}),n.headers=le.concat(i,o);const a=[];let h=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(n)===!1||(h=h&&b.synchronous,a.unshift(b.fulfilled,b.rejected))});const l=[];this.interceptors.response.forEach(function(b){l.push(b.fulfilled,b.rejected)});let u,f=0,m;if(!h){const E=[wt.bind(this),void 0];for(E.unshift.apply(E,a),E.push.apply(E,l),m=E.length,u=Promise.resolve(n);f<m;)u=u.then(E[f++],E[f++]);return u}m=a.length;let w=n;for(f=0;f<m;){const E=a[f++],b=a[f++];try{w=E(w)}catch(T){b.call(this,T);break}}try{u=wt.call(this,w)}catch(E){return Promise.reject(E)}for(f=0,m=l.length;f<m;)u=u.then(l[f++],l[f++]);return u}getUri(e){e=me(this.defaults,e);const n=qt(e.baseURL,e.url);return Mt(n,e.params,e.paramsSerializer)}}p.forEach(["delete","get","head","options"],function(e){Ue.prototype[e]=function(n,r){return this.request(me(r||{},{method:e,url:n,data:(r||{}).data}))}});p.forEach(["post","put","patch"],function(e){function n(r){return function(o,i,a){return this.request(me(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:i}))}}Ue.prototype[e]=n(),Ue.prototype[e+"Form"]=n(!0)});const xe=Ue;class st{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const r=this;this.promise.then(s=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](s);r._listeners=null}),this.promise.then=s=>{let o;const i=new Promise(a=>{r.subscribe(a),o=a}).then(s);return i.cancel=function(){r.unsubscribe(o)},i},e(function(o,i,a){r.reason||(r.reason=new Ie(o,i,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new st(function(s){e=s}),cancel:e}}}const Tr=st;function Nr(t){return function(n){return t.apply(null,n)}}function kr(t){return p.isObject(t)&&t.isAxiosError===!0}const $e={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries($e).forEach(([t,e])=>{$e[e]=t});const Pr=$e;function Wt(t){const e=new xe(t),n=Nt(xe.prototype.request,e);return p.extend(n,xe.prototype,e,{allOwnKeys:!0}),p.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return Wt(me(t,s))},n}const $=Wt(nt);$.Axios=xe;$.CanceledError=Ie;$.CancelToken=Tr;$.isCancel=Jt;$.VERSION=zt;$.toFormData=He;$.AxiosError=U;$.Cancel=$.CanceledError;$.all=function(e){return Promise.all(e)};$.spread=Nr;$.isAxiosError=kr;$.mergeConfig=me;$.AxiosHeaders=le;$.formToJSON=t=>Ht(p.isHTMLForm(t)?new FormData(t):t);$.HttpStatusCode=Pr;$.default=$;const Dr=$;function St(t,e,n){const r=t.slice();return r[3]=e[n],r}function Cr(t){let e,n=t[3].sender+"",r,s,o,i,a,h=t[3].message+"",l,u,f;return{c(){e=y("b"),r=M(n),s=C(),o=y("br"),i=C(),a=y("p"),l=M(h),u=C(),f=y("br")},l(m){e=_(m,"B",{});var w=g(e);r=V(w,n),w.forEach(d),s=I(m),o=_(m,"BR",{}),i=I(m),a=_(m,"P",{});var E=g(a);l=V(E,h),E.forEach(d),u=I(m),f=_(m,"BR",{})},m(m,w){z(m,e,w),c(e,r),z(m,s,w),z(m,o,w),z(m,i,w),z(m,a,w),c(a,l),z(m,u,w),z(m,f,w)},p(m,w){w&2&&n!==(n=m[3].sender+"")&&fe(r,n),w&2&&h!==(h=m[3].message+"")&&fe(l,h)},d(m){m&&d(e),m&&d(s),m&&d(o),m&&d(i),m&&d(a),m&&d(u),m&&d(f)}}}function Ir(t){let e,n,r=t[3].sender+"",s,o,i,a,h,l,u,f,m=t[3].message+"",w,E,b,T;return{c(){e=y("div"),n=y("b"),s=M(r),o=C(),i=y("small"),a=M("(Only visible to you)"),h=C(),l=y("br"),u=C(),f=y("p"),w=M(m),E=C(),b=y("br"),T=C(),this.h()},l(A){e=_(A,"DIV",{class:!0,style:!0});var v=g(e);n=_(v,"B",{});var O=g(n);s=V(O,r),O.forEach(d),o=I(v),i=_(v,"SMALL",{});var R=g(i);a=V(R,"(Only visible to you)"),R.forEach(d),h=I(v),l=_(v,"BR",{}),u=I(v),f=_(v,"P",{});var k=g(f);w=V(k,m),k.forEach(d),E=I(v),b=_(v,"BR",{}),T=I(v),v.forEach(d),this.h()},h(){S(e,"class","notification is-primary is-light"),K(e,"font-weight","500",1),K(e,"margin-bottom","2%")},m(A,v){z(A,e,v),c(e,n),c(n,s),c(e,o),c(e,i),c(i,a),c(e,h),c(e,l),c(e,u),c(e,f),c(f,w),c(e,E),c(e,b),c(e,T)},p(A,v){v&2&&r!==(r=A[3].sender+"")&&fe(s,r),v&2&&m!==(m=A[3].message+"")&&fe(w,m)},d(A){A&&d(e)}}}function Rt(t){let e;function n(o,i){return o[3].sender=="Peace Messenger"?Ir:Cr}let r=n(t),s=r(t);return{c(){s.c(),e=ft()},l(o){s.l(o),e=ft()},m(o,i){s.m(o,i),z(o,e,i)},p(o,i){r===(r=n(o))&&s?s.p(o,i):(s.d(1),s=r(o),s&&(s.c(),s.m(e.parentNode,e)))},d(o){s.d(o),o&&d(e)}}}function Lr(t){let e;return{c(){e=M("Seek Peace")},l(n){e=V(n,"Seek Peace")},m(n,r){z(n,e,r)},d(n){n&&d(e)}}}function Br(t){let e,n,r;return{c(){e=y("span"),n=y("i"),r=M(" Please Wait"),this.h()},l(s){e=_(s,"SPAN",{});var o=g(e);n=_(o,"I",{class:!0}),g(n).forEach(d),r=V(o," Please Wait"),o.forEach(d),this.h()},h(){S(n,"class","fas fa-spinner fa-spin")},m(s,o){z(s,e,o),c(e,n),c(e,r)},d(s){s&&d(e)}}}function Fr(t){let e,n,r,s,o,i,a,h,l,u,f,m,w,E,b,T,A,v,O,R,k,L,F,B,N,P,H,Y,X,W=t[1],D=[];for(let x=0;x<W.length;x+=1)D[x]=Rt(St(t,W,x));function q(x,j){return x[2]?Br:Lr}let G=q(t),Q=G(t);return{c(){e=y("div"),n=y("center"),r=y("span"),s=y("b"),o=M("Connected with "),i=M(t[0]),a=C(),h=y("div"),l=y("small");for(let x=0;x<D.length;x+=1)D[x].c();u=C(),f=y("div"),m=y("form"),w=y("div"),E=y("div"),b=y("textarea"),T=C(),A=y("div"),v=y("div"),O=y("button"),R=M("Send"),k=C(),L=y("div"),F=y("button"),Q.c(),B=C(),N=y("div"),P=y("button"),H=M("Export"),this.h()},l(x){e=_(x,"DIV",{});var j=g(e);n=_(j,"CENTER",{});var J=g(n);r=_(J,"SPAN",{class:!0});var ne=g(r);s=_(ne,"B",{});var pe=g(s);o=V(pe,"Connected with "),i=V(pe,t[0]),pe.forEach(d),ne.forEach(d),J.forEach(d),a=I(j),h=_(j,"DIV",{id:!0,style:!0});var ie=g(h);l=_(ie,"SMALL",{});var we=g(l);for(let ze=0;ze<D.length;ze+=1)D[ze].l(we);we.forEach(d),ie.forEach(d),u=I(j),f=_(j,"DIV",{class:!0});var ve=g(f);m=_(ve,"FORM",{});var ue=g(m);w=_(ue,"DIV",{class:!0});var Ae=g(w);E=_(Ae,"DIV",{class:!0});var Se=g(E);b=_(Se,"TEXTAREA",{class:!0,placeholder:!0}),g(b).forEach(d),Se.forEach(d),Ae.forEach(d),T=I(ue),A=_(ue,"DIV",{class:!0});var ae=g(A);v=_(ae,"DIV",{class:!0});var ot=g(v);O=_(ot,"BUTTON",{type:!0,class:!0});var it=g(O);R=V(it,"Send"),it.forEach(d),ot.forEach(d),k=I(ae),L=_(ae,"DIV",{class:!0});var at=g(L);F=_(at,"BUTTON",{type:!0,class:!0});var lt=g(F);Q.l(lt),lt.forEach(d),at.forEach(d),B=I(ae),N=_(ae,"DIV",{class:!0});var ct=g(N);P=_(ct,"BUTTON",{type:!0,class:!0});var ut=g(P);H=V(ut,"Export"),ut.forEach(d),ct.forEach(d),ae.forEach(d),ue.forEach(d),ve.forEach(d),j.forEach(d),this.h()},h(){S(r,"class","tag is-primary is-rounded"),S(h,"id","messages"),K(h,"height","50vh"),K(h,"overflow","scroll"),K(h,"margin-top","2%"),K(h,"display","flex"),K(h,"flex-direction","column-reverse"),S(b,"class","textarea"),S(b,"placeholder","Type your message here"),S(E,"class","control"),S(w,"class","field"),S(O,"type","button"),S(O,"class","button is-info"),S(v,"class","control"),S(F,"type","button"),S(F,"class","button is-primary"),S(L,"class","control"),S(P,"type","button"),S(P,"class","button"),S(N,"class","control"),S(A,"class","field is-grouped"),S(f,"class","footer-fixed")},m(x,j){z(x,e,j),c(e,n),c(n,r),c(r,s),c(s,o),c(s,i),c(e,a),c(e,h),c(h,l);for(let J=0;J<D.length;J+=1)D[J]&&D[J].m(l,null);c(e,u),c(e,f),c(f,m),c(m,w),c(w,E),c(E,b),ee(b,t[3]),c(m,T),c(m,A),c(A,v),c(v,O),c(O,R),c(A,k),c(A,L),c(L,F),Q.m(F,null),c(A,B),c(A,N),c(N,P),c(P,H),Y||(X=[Z(b,"input",t[10]),Z(b,"keyup",t[6]),Z(O,"click",t[11]),Z(F,"click",t[12]),Z(P,"click",t[13])],Y=!0)},p(x,[j]){if(j&1&&fe(i,x[0]),j&2){W=x[1];let J;for(J=0;J<W.length;J+=1){const ne=St(x,W,J);D[J]?D[J].p(ne,j):(D[J]=Rt(ne),D[J].c(),D[J].m(l,null))}for(;J<D.length;J+=1)D[J].d(1);D.length=W.length}j&8&&ee(b,x[3]),G!==(G=q(x))&&(Q.d(1),Q=G(x),Q&&(Q.c(),Q.m(F,null)))},i:re,o:re,d(x){x&&d(e),Kt(D,x),Q.d(),Y=!1,be(X)}}}function xr(t,e,n){let{name:r}=e,{peerName:s}=e,{messages:o}=e,{openai_key:i}=e,a;const h=Te();let l=!1;function u(){var O=o.map(k=>k.sender+" : "+k.message+`
`);O=O.join("");var R=document.createElement("a");R.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(O)),R.setAttribute("download","peace_messenger_conversation.txt"),R.style.display="none",document.body.appendChild(R),R.click(),document.body.removeChild(R)}function f(){console.log("sending message");let O={type:"send",sender:r,message:a,timestamp:Math.floor(Date.now()/1e3)};console.log(O),h("message",O),n(3,a="")}function m(O){O.key==="Enter"&&!O.shiftKey&&f()}async function w(O){console.log(i),n(2,l=!0);let R={};try{const k={method:"POST",url:"https://api.openai.com/v1/chat/completions",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},data:{model:"gpt-3.5-turbo",messages:[{role:"user",content:O}]}};R={type:"appendmessage",sender:"Peace Messenger",message:(await Dr.request(k)).data.choices[0].message.content,timestamp:Math.floor(Date.now()/1e3)},console.log(R)}catch{R={type:"appendmessage",sender:"Peace Messenger",message:"Unable to connect to OpenAI or Invalid API Key.",timestamp:Math.floor(Date.now()/1e3)}}h("message",R),n(2,l=!1)}async function E(){console.log("Seeking Peace");let R=o.map(F=>F.sender=="Peace Messenger"?"":F.sender+" : "+F.message+`
`).join("");console.log(R);let k=R.split(" ").slice(-900).join(" "),L=`Analyze the conversation provided then use principles from Marshall Rosenberg's 'Nonviolent Communication: A Language of Life'. Guide ${r} towards peaceful conflict resolution. Include example phrases in quotes as necessary. Limit your response to under six lines 

 ==Conversation Start== 
 ${k} 
 ==Conversation End== 

. Now guide ${r} what he needs to do.`;w(L)}function b(){a=this.value,n(3,a)}const T=()=>f(),A=()=>E(),v=()=>u();return t.$$set=O=>{"name"in O&&n(8,r=O.name),"peerName"in O&&n(0,s=O.peerName),"messages"in O&&n(1,o=O.messages),"openai_key"in O&&n(9,i=O.openai_key)},[s,o,l,a,u,f,m,E,r,i,b,T,A,v]}class Ur extends ye{constructor(e){super(),_e(this,e,xr,Fr,Ee,{name:8,peerName:0,messages:1,openai_key:9})}}function jr(t){let e,n;return e=new Ur({props:{name:t[4],peerName:t[5],messages:t[6],openai_key:t[7]}}),e.$on("message",t[8]),{c(){Ne(e.$$.fragment)},l(r){ke(e.$$.fragment,r)},m(r,s){Pe(e,r,s),n=!0},p(r,s){const o={};s&16&&(o.name=r[4]),s&32&&(o.peerName=r[5]),s&64&&(o.messages=r[6]),s&128&&(o.openai_key=r[7]),e.$set(o)},i(r){n||(he(e.$$.fragment,r),n=!0)},o(r){de(e.$$.fragment,r),n=!1},d(r){De(e,r)}}}function Mr(t){let e,n;return e=new pn({props:{offer:t[0],exchangeError:t[1],peer:t[3]}}),e.$on("message",t[8]),{c(){Ne(e.$$.fragment)},l(r){ke(e.$$.fragment,r)},m(r,s){Pe(e,r,s),n=!0},p(r,s){const o={};s&1&&(o.offer=r[0]),s&2&&(o.exchangeError=r[1]),s&8&&(o.peer=r[3]),e.$set(o)},i(r){n||(he(e.$$.fragment,r),n=!0)},o(r){de(e.$$.fragment,r),n=!1},d(r){De(e,r)}}}function Vr(t){let e,n;return e=new cn({props:{offer:t[0],peer:t[3]}}),e.$on("message",t[8]),{c(){Ne(e.$$.fragment)},l(r){ke(e.$$.fragment,r)},m(r,s){Pe(e,r,s),n=!0},p(r,s){const o={};s&1&&(o.offer=r[0]),s&8&&(o.peer=r[3]),e.$set(o)},i(r){n||(he(e.$$.fragment,r),n=!0)},o(r){de(e.$$.fragment,r),n=!1},d(r){De(e,r)}}}function Hr(t){let e,n;return e=new sn({props:{peer:t[3]}}),e.$on("message",t[8]),{c(){Ne(e.$$.fragment)},l(r){ke(e.$$.fragment,r)},m(r,s){Pe(e,r,s),n=!0},p(r,s){const o={};s&8&&(o.peer=r[3]),e.$set(o)},i(r){n||(he(e.$$.fragment,r),n=!0)},o(r){de(e.$$.fragment,r),n=!1},d(r){De(e,r)}}}function Jr(t){let e,n;return e=new tn({props:{peer:t[3]}}),e.$on("message",t[8]),{c(){Ne(e.$$.fragment)},l(r){ke(e.$$.fragment,r)},m(r,s){Pe(e,r,s),n=!0},p(r,s){const o={};s&8&&(o.peer=r[3]),e.$set(o)},i(r){n||(he(e.$$.fragment,r),n=!0)},o(r){de(e.$$.fragment,r),n=!1},d(r){De(e,r)}}}function qr(t){let e,n,r,s,o,i,a,h,l,u,f,m,w,E,b,T;const A=[Jr,Hr,Vr,Mr,jr],v=[];function O(R,k){return R[2]=="home"?0:R[2]=="createroom"?1:R[2]=="exchangeoffers"?2:R[2]=="joinroom"?3:R[2]=="chat"?4:-1}return~(u=O(t))&&(f=v[u]=A[u](t)),{c(){e=y("main"),n=y("div"),r=y("div"),s=C(),o=y("div"),i=y("div"),a=y("img"),l=C(),f&&f.c(),m=C(),w=y("div"),this.h()},l(R){e=_(R,"MAIN",{});var k=g(e);n=_(k,"DIV",{class:!0});var L=g(n);r=_(L,"DIV",{class:!0}),g(r).forEach(d),s=I(L),o=_(L,"DIV",{class:!0});var F=g(o);i=_(F,"DIV",{style:!0});var B=g(i);a=_(B,"IMG",{style:!0,src:!0}),l=I(B),f&&f.l(B),B.forEach(d),F.forEach(d),m=I(L),w=_(L,"DIV",{class:!0}),g(w).forEach(d),L.forEach(d),k.forEach(d),this.h()},h(){S(r,"class","column is-4"),K(a,"cursor","default"),Ot(a.src,h="/peace_messenger/logo_2x.png")||S(a,"src",h),K(i,"margin-top","0%"),S(o,"class","column is-4"),S(w,"class","column is-4"),S(n,"class","columns")},m(R,k){z(R,e,k),c(e,n),c(n,r),c(n,s),c(n,o),c(o,i),c(i,a),c(i,l),~u&&v[u].m(i,null),c(n,m),c(n,w),E=!0,b||(T=Z(a,"click",t[9]),b=!0)},p(R,[k]){let L=u;u=O(R),u===L?~u&&v[u].p(R,k):(f&&(Qt(),de(v[L],1,1,()=>{v[L]=null}),Gt()),~u?(f=v[u],f?f.p(R,k):(f=v[u]=A[u](R),f.c()),he(f,1),f.m(i,null)):f=null)},i(R){E||(he(f),E=!0)},o(R){de(f),E=!1},d(R){R&&d(e),~u&&v[u].d(),b=!1,T()}}}function zr(t,e,n){let r,s,o,i="home",a,h,l,u=[],f,m=!1;function w(A){A.preventDefault(),n(0,r=null),s=null,n(7,f=null),n(4,h=null),n(3,a=null),n(5,l=null),n(6,u=[]),n(2,i="home")}Xt(()=>{m=!0,window.addEventListener("popstate",w)}),Yt(()=>{m&&window.removeEventListener("popstate",w)});function E(A){n(3,a=new SimplePeer({initiator:A,trickle:!1})),n(3,a._debug=console.log,a),a.on("signal",v=>{n(0,r=btoa(JSON.stringify(v)))}),a.on("connect",()=>{console.log("Peer connected!"),i!="chat"&&(n(2,i="chat"),a.send(JSON.stringify({user:"system",type:"name",name:h}))),f&&a.send(JSON.stringify({user:"system",type:"openai",openai_key:f}))}),a.on("data",v=>{v=JSON.parse(v.toString()),v.type=="name"?(n(5,l=v.name),a.send(JSON.stringify({user:"system",type:"name",name:h}))):v.type=="message"?(console.log(v),n(6,u=[...u,v])):v.type=="openai"&&(console.log(v),n(7,f=v.openai_key))}),a.on("error",v=>{i!="chat"&&a.signal(s.trim())})}function b(A){if(console.log(A),A.detail.type=="navigate")n(2,i=A.detail.page),i=="createroom"?(window.history.pushState({page:i},null,null),E(!0)):i=="joinroom"&&(window.history.pushState({page:i},null,null),E(!1));else if(A.detail.type=="join"){console.log("Joining"),s=A.detail.remoteDescription,A.detail.name&&n(4,h=A.detail.name);try{console.log(atob(s)),a.signal(JSON.parse(atob(s.trim())))}catch(v){console.log(v),n(1,o="Please paste a valid code.")}}else A.detail.type=="createroom"?(n(4,h=A.detail.name),n(2,i="exchangeoffers"),console.log("creating Room"),console.log(h),n(7,f=A.detail.openai_key)):A.detail.type=="send"?(console.log("sending"),n(6,u=[...u,A.detail]),a.send(JSON.stringify({sender:A.detail.sender,message:A.detail.message,type:"message",timestamp:A.detail.timestamp}))):A.detail.type=="appendmessage"&&n(6,u=[...u,A.detail])}return[r,o,i,a,h,l,u,f,b,()=>n(2,i="home")]}class Gr extends ye{constructor(e){super(),_e(this,e,zr,qr,Ee,{})}}export{Gr as component,Kr as universal};
